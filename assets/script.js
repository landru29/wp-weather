(()=>{"use strict";var e=function(){function e(e){this.ctx=e.getContext("2d"),this.centerY=e.height/2,this.centerX=e.width/2,this.square=2*(this.centerY>this.centerX?this.centerX:this.centerY),this.clear();for(var t=0;t<360;t+=10)this.displayMark(t,"#888");for(t=45;t<360;t+=90)this.displayCardinal(t,!1,{color:"#cecece"}),this.displayCardinal(t,!0,{color:"#dfdfdf"});for(t=0;t<360;t+=90)this.displayCardinal(t,!1,{color:"#ccc"}),this.displayCardinal(t,!0,{color:"#ddd"})}return e.prototype.clear=function(){this.ctx.clearRect(0,0,this.centerX,this.centerY)},e.prototype.displayCardinal=function(e,t,i){var n=i&&i.width||this.square/15,a=i&&i.height||this.square/2,s=i&&i.color||"#ccc";this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(e*Math.PI/180),this.ctx.moveTo(t?n:-n,-n),this.ctx.lineTo(0,-a),this.ctx.lineTo(0,0),this.ctx.lineTo(t?n:-n,-n),this.ctx.fillStyle=s,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()},e.prototype.displayMark=function(e,t){void 0===t&&(t="#000"),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(e*Math.PI/180),this.ctx.moveTo(0,-this.square/2),this.ctx.lineTo(0,-this.square/2*.95),this.ctx.strokeStyle=t,this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()},e.prototype.displayWind=function(e,t,i,n){if(void 0===t&&(t=""),void 0===i&&(i=18),void 0===n&&(n="#1d528e"),null!=e){this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(e*Math.PI/180),this.ctx.moveTo(0,-this.square/5),this.ctx.lineTo(0,-this.square/2*.93),this.ctx.strokeStyle=n,this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore();var a=this.square/25;this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(e*Math.PI/180),this.ctx.moveTo(.5*a,-a-this.square/5),this.ctx.lineTo(0,-this.square/5),this.ctx.lineTo(.5*-a,-a-this.square/5),this.ctx.moveTo(.5*a,-a-this.square/5),this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.font=i+"px sans serif",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle=n,null!=e&&this.ctx.fillText(e.toFixed(0)+"°",0,i/1.8),this.ctx.fillText(""+t,0,-i/1.8),this.ctx.restore()},e}(),t=function(){function t(e,t){this.container=e,this.lang=t}return t.prototype.display=function(t){var i=this;return new Promise((function(n,a){var s={fr:{wind:"Vent",temp:"Temp",dew:"Rosée",pressure:"Pression",visibility:"Visibilité",error:"Erreur",raw:"Original"},en:{wind:"Wind",temp:"Temp",dew:"Dew",pressure:"Pressure",visibility:"Visibility",error:"error",raw:"Original"}};if(t.wind_speed){var r=jQuery('<canvas class="wind" width="150" height="150"></canvas>'),l=r.get(0);i.container.append(r),new e(l).displayWind(t.wind_direction.value,t.wind_speed.value+" "+t.units.wind_speed,15,"#ca2017")}if(t.temperature&&i.container.append('<div class="form-element"><label>'+s[i.lang].temp+':</label><span class="value">'+t.temperature.value+"<em>°"+t.units.temperature+"</em></span></div>"),t.dewpoint&&i.container.append('<div class="form-element"><label>'+s[i.lang].dew+':</label><span class="value">'+t.dewpoint.value+"<em>°"+t.units.temperature+"</em></span></div>"),t.altimeter&&i.container.append('<div class="form-element"><label>'+s[i.lang].pressure+':</label><span class="value">'+t.altimeter.value+"<em>"+t.units.altimeter+"</em></span></div>"),t.remarks){var o={fr:{NOSIG:"Aucun changement significatif dans les deux heures à venir",BECMG:"Changements prévus entre les heures indiquées",GRADU:"Changements prévus qui va arriver progressivement",RAPID:"Changements prévus rapidement (avant une demi-heure en moyenne)",TEMPO:"Fluctuations temporaires dans un bloc de 1 à 4 heures.",INTER:"Changements fréquents mais brefs",TEND:"Tendance"},en:{NOSIG:"No significant change",BECMG:"Becoming",GRADU:"Gradualy",RAPID:"Rapidly",TEMPO:"Temporary changes expected",INTER:"Intermittent",TEND:"Trend"}}[i.lang][t.remarks];o||(o=t.remarks),i.container.append('<div class="form-element"><label>Remarque:</label><span class="value">'+o+"</span></div>")}if(t.clouds&&t.clouds.length){var c={fr:{SKC:"aucun nuage [SKC]",FEW:"quelques nuages, 1/8 à 2/8 du ciel couvert [FEW]",SCT:"épars, 3/8 à 4/8 du ciel couvert [SCT]",BKN:"fragmenté, 5/8 à 7/8 du ciel couvert [BKN]",OVC:"couvert, 8/8 du ciel couvert [OVC]",NSC:"aucun nuage d'une hauteur inférieure à 5 000 pieds ou sous l'altitude minimale de secteur [NSC]"},en:{SKC:"sky [SKC]",FEW:"few, 1/8 - 2/8 [FEW]",SCT:"scattered, 3/8 - 4/8 [SCT]",BKN:"broken, 5/8 - 7/8 [BKN]",OVC:"overcast, 8/8 [OVC]",NSC:"No significant clouds [NSC]"}},u=t.clouds.map((function(e){return'<li class="cloud-item"><span class="cloud-altitude">Alt '+e.altitude+" "+t.units.altitude+":</span> "+c[i.lang][e.type]+"</li>"}));i.container.append('<div class="form-element"><label>Nuages:</label><ul class="value">'+u.join("\n")+"</ul></div>")}if(t.visibility){var d='<span class="value">'+t.visibility.value+"<em>"+t.units.visibility+"</em></span>";"CAVOK"==t.visibility.repr&&(d='<span class="value">'+{fr:"Nuages et visibilité sont OK,",en:"Ceiling and visibility OK"}[i.lang]+"</span>"),i.container.append('<div class="form-element"><label>'+s[i.lang].visibility+":</label>"+d+"</div>")}t.raw&&i.container.append('<div class="form-element"><label>'+s[i.lang].raw+':</label><span class="value">'+t.raw+"</span></div>"),n(t)}))},t}(),i=function(){function e(e,t){this.container=e,this.lang=t}return e.prototype.display=function(e){var i=this;return new Promise((function(n,a){var s={};if(!e.forecast.length)return n(e);var r=jQuery('<div class="switch-box"></div>');r.append('<label for="default" class="switch-box-label">MVFR</label>');var l=jQuery('<input id="default" class="switch-box-input" type="checkbox" />');r.append(l),r.append('<label for="default" class="switch-box-slider"></label>'),r.append('<label for="default" class="switch-box-label">IFR</label>'),i.container.append(r),l.on("change",(function(e){var t=jQuery(e.target).is(":checked")?"IFR":"MVFR";Object.keys(s).forEach((function(e){s[e].container.removeClass("visible")})),s[t]&&s[t].container&&s[t].container.addClass("visible")}));var o=jQuery('<div class="forecast"></div>');i.container.append(o),e.forecast.forEach((function(n){s[n.flight_rules]||(s[n.flight_rules]={container:jQuery('<div class="'+n.flight_rules+'"></div>'),timeline:jQuery('<div class="timeline"></div>'),data:{}},o.append(s[n.flight_rules].container),s[n.flight_rules].container.append(s[n.flight_rules].timeline)),s[n.flight_rules].data[n.end_time.dt]=n;var a=n;a.frame=jQuery('<div class="tab"></div>'),s[n.flight_rules].container.append(a.frame),a.units=e.units;var r=new Date(n.end_time.dt),l=jQuery('<button class="time-tab">'+r.getDate().leading(2)+"/"+r.getMonth()+" "+r.getHours().leading(2)+":"+r.getMinutes().leading(2)+"</button>");s[n.flight_rules].timeline.append(l),1==Object.keys(s[n.flight_rules].data).length&&(s[n.flight_rules].data[n.end_time.dt].frame.addClass("visible"),l.addClass("selected")),l.on("click",(function(e){s[n.flight_rules].timeline.children().each((function(e,t){jQuery(t).removeClass("selected")})),jQuery(e.target).addClass("selected"),s[n.flight_rules].container.find("div.tab").each((function(e,t){jQuery(t).removeClass("visible")})),s[n.flight_rules].data[n.end_time.dt].frame.addClass("visible")})),new t(a.frame,i.lang).display(a)})),s.MVFR.container.addClass("visible"),e.raw&&i.container.append('<div class="form-element"><label>Taf:</label><span class="value">'+e.raw+"</span></div>"),n(e)}))},e}();Number.prototype.leading=function(e,t){return void 0===t&&(t="0"),(Array(e).fill(t).join("")+this).substr(-e)};var n=function(){function e(e){this.dl=e,this.currentTab="metar",this.config=window.weatherConfig,this.currentLocation=this.config.locations[0]}return e.prototype.getLang=function(){return"fr"==this.config.lang?this.config.lang:"en"},e.prototype.tabShowOnly=function(e){jQuery("div.weather-widget-placeholder").children().each((function(t,i){jQuery(i).css("display","none"),jQuery("."+e).css("display","block")}))},e.prototype.addTab=function(e,t,i,n,a){var s=this;void 0===a&&(a=!1);var r=jQuery('<button class="'+(a?"selected":"")+'">'+t+"</button>");r.on("click",(function(t){i.children().each((function(e,t){jQuery(t).removeClass("selected")})),jQuery(t.currentTarget).addClass("selected"),s.tabShowOnly("weather-loading"),s.currentTab=e,s.loadWeather(e,s.currentLocation)})),i.append(r),n.append('<div class="tab-'+e+'"></div>')},e.prototype.loadWeather=function(e,t){var i=this;this.dl.load(this.config.url[e],e,t,this.getLang(),(function(t){t.station.toUpperCase(),i.tabShowOnly("tab-"+e),i.displayData(e,jQuery("div.tab-"+e),t)}))},e.prototype.displayData=function(e,n,a){var s,r=this,l=this.getLang();if(n.empty(),a.error){var o={fr:"Erreur",en:"Error"};return n.append('<div class="form-element"><label>'+o[l]+':</label><span class="value">'+a.error+"</span></div>"),new Promise((function(e,t){t(o[l])}))}switch(e){case"metar":s=new t(n,l).display(a);break;case"taf":s=new i(n,l).display(a);break;default:s=new Promise((function(t,i){i("no displayer for "+e)}))}return s.then((function(){r.appendTime(n,a)}))},e.prototype.appendTime=function(e,t){var i=this.getLang();if(t.time){var n=new Date(t.time.dt),a={fr:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aou","Sep","Oct","Nov","Dec"],en:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}[i][n.getMonth()-1],s=n.getHours().leading(2),r=n.getMinutes().leading(2);e.append('<span class="date"><span class="month">'+a+'</span><span class="day">'+n.getDate()+"</span></span>"),e.append('<span class="time">'+s+":"+r+"</span>")}},e.prototype.init=function(e){var t=this;if(0!=e.length&&this.config&&this.config.locations)if(this.config.locations.length){e.empty();var i=this.getLang();e.append('<h3 class="weather-title"></h3');var n=jQuery('<select class="weather-location-select"></select>');e.append(n),this.config.locations.forEach((function(e,t){var i=t?"":"selected";n.append('<option value="'+e.name+'" '+i+">"+e.name+" ("+e.label+")</option>")})),n.on("change",(function(e){var i=jQuery(e.target).children("option:selected").val(),n=t.config.locations.filter((function(e){return e.name==""+i}));1==n.length&&(t.currentLocation=n[0],t.tabShowOnly("weather-loading"),t.loadWeather(t.currentTab?t.currentTab:"metar",n[0]))}));var a=jQuery('<div class="tabs"></div>');e.append(a);var s=jQuery('<div class="weather-widget-placeholder"></div>');e.append(s),s.append('<img class="weather-loading" src="'+this.config.loadingImg+'">'),this.addTab("metar","Metar",a,s,!0),this.addTab("taf","Taf",a,s),e.append('<div class="disclaimer"><span class="dashicons dashicons-warning"></span>'+{fr:"Toutes les données présentées sur ce site sont non certifiées : elles doivent être systématiquement controlées à partir de données officielles",en:"All the data presented on this site are not certified: they must be systematically checked from official data"}[i]+"</div>"),this.config.locations&&0!=this.config.locations.length&&this.loadWeather("metar",this.config.locations[0])}else console.warn("[weather]","missing locations")},e}(),a=function(){function e(e,t){void 0===t&&(t=!1),this.policy=e,this.debug=t,this.cache={},this.timeoutHandler=null}return e.prototype.load=function(e,t,i,n,a){this.reloadAt(null,e,t,i,n,a)},e.prototype.loadData=function(e,t,i,n,a){var s=this,l=this.cacheName(t,i);return new Promise((function(a,o){var c=s.cache[l];if(s.debug&&c&&c.hasExpired()&&console.log("[CACHE] expired at",c.expireAt),c&&!c.hasExpired())return s.debug&&console.log("[CACHE]",l,c.data),a(c);jQuery.getJSON([e,i.name].join("/"),(function(){})).done((function(e){s.debug&&console.log("[GET]",l,e);var i=s.policy[t]?s.policy[t].nextExpiration(e):null;s.cache[l]=new r(e,i),a(s.cache[l])})).fail((function(){o("fr"==n?"Saperlipopette ! je n'arrive pas à récupérer les données.":"OMG ! I'm not able to retrieve data.")}))})).then((function(r){a(r.data);var l=r.expireAt;return((null==l?void 0:l.getTime())||0)>(new Date).getTime()&&(s.debug&&console.log("will reload",t,i.name,"at",(null==l?void 0:l.getHours())+":"+(null==l?void 0:l.getMinutes())),s.reloadAt(l,e,t,i,n,a)),r})).catch((function(e){return console.warn(e),a({error:e,station:i.name}),Promise.reject(e)}))},e.prototype.reloadAt=function(e,t,i,n,a,s){var r=this;if(null!=this.timeoutHandler&&(clearTimeout(this.timeoutHandler),this.timeoutHandler=null),null!=e){var l=e.getTime()-(new Date).getTime();if(l<=100)return this.reloadAt(null,t,i,n,a,s);this.timeoutHandler=setTimeout((function(){r.loadData(t,i,n,a,s)}),l)}else this.loadData(t,i,n,a,s)},e.prototype.cacheName=function(e,t){return e+"-"+t.name},e}(),s=function(){function e(e,t){this.frequencySecond=e,this.retrySecond=t}return e.prototype.nextExpiration=function(e){if(this.frequencySecond<=0)return null;var t=new Date(e.time.dt).getTime(),i=(new Date).getTime(),n=Math.floor(i/(1e3*this.frequencySecond))*this.frequencySecond*1e3,a=Math.ceil(i/(1e3*this.frequencySecond))*this.frequencySecond*1e3;return n==t?new Date(a):new Date(1e3*this.retrySecond+i)},e}(),r=function(){function e(e,t){this.data=e,this.expireAt=t}return e.prototype.hasExpired=function(){return null==this.expireAt||this.expireAt.getTime()<(new Date).getTime()+1e3},e}();jQuery((function(){new n(new a({taf:new s(10800,600),metar:new s(1800,120)},!0)).init(jQuery("div.weather-plugin"))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2FwcC93aW5kLnRzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvYXBwL21ldGFyLnRzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvYXBwL3RhZi50cyIsIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2FwcC9jb250cm9sbGVyLnRzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvYXBwL2Rvd25sb2FkLW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vd2VhdGhlci8uL3NyYy9hcHAvaW5kZXgudHMiXSwibmFtZXMiOlsiZWx0IiwidGhpcyIsImN0eCIsImdldENvbnRleHQiLCJjZW50ZXJZIiwiaGVpZ2h0IiwiY2VudGVyWCIsIndpZHRoIiwic3F1YXJlIiwiY2xlYXIiLCJpIiwiZGlzcGxheU1hcmsiLCJkaXNwbGF5Q2FyZGluYWwiLCJjb2xvciIsImNsZWFyUmVjdCIsImFuZ2xlIiwibGVmdCIsIm9wdCIsInNhdmUiLCJiZWdpblBhdGgiLCJ0cmFuc2xhdGUiLCJyb3RhdGUiLCJNYXRoIiwiUEkiLCJtb3ZlVG8iLCJsaW5lVG8iLCJmaWxsU3R5bGUiLCJmaWxsIiwiY2xvc2VQYXRoIiwicmVzdG9yZSIsInN0cm9rZVN0eWxlIiwic3Ryb2tlIiwiZGlzcGxheVdpbmQiLCJmb3JjZSIsInNpemUiLCJhcnJvdyIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJ0ZXh0QmFzZWxpbmUiLCJmaWxsVGV4dCIsInRvRml4ZWQiLCJjb250YWluZXIiLCJsYW5nIiwiZGlzcGxheSIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInRpdGxlcyIsImZyIiwid2luZCIsInRlbXAiLCJkZXciLCJwcmVzc3VyZSIsInZpc2liaWxpdHkiLCJlcnJvciIsInJhdyIsImVuIiwid2luZF9zcGVlZCIsImNhbnZhcyIsImpRdWVyeSIsImdldCIsImFwcGVuZCIsIldpbmQiLCJ3aW5kX2RpcmVjdGlvbiIsInZhbHVlIiwidW5pdHMiLCJ0ZW1wZXJhdHVyZSIsImRld3BvaW50IiwiYWx0aW1ldGVyIiwicmVtYXJrcyIsInJlbWFyayIsIk5PU0lHIiwiQkVDTUciLCJHUkFEVSIsIlJBUElEIiwiVEVNUE8iLCJJTlRFUiIsIlRFTkQiLCJjbG91ZHMiLCJsZW5ndGgiLCJ0eXBlcyIsIlNLQyIsIkZFVyIsIlNDVCIsIkJLTiIsIk9WQyIsIk5TQyIsIm1hcCIsImNsb3VkIiwiYWx0aXR1ZGUiLCJ0eXBlIiwiam9pbiIsInZpcyIsInJlcHIiLCJmb3JlY2FzdCIsInN3aXRjaEJveCIsInN3aXRjaEJ0biIsIm9uIiwiZXZlbnQiLCJmbGlnaHRSdWxlIiwidGFyZ2V0IiwiaXMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsIm5hbWUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZm9yZWNhc3RDb250YWluZXIiLCJmbGlnaHRfcnVsZXMiLCJ0aW1lbGluZSIsImVuZF90aW1lIiwiZHQiLCJtZXRhckxpa2UiLCJmcmFtZSIsInQiLCJEYXRlIiwiYnRuIiwiZ2V0RGF0ZSIsImxlYWRpbmciLCJnZXRNb250aCIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImNoaWxkcmVuIiwiZWFjaCIsImluZGV4IiwiZWxlbWVudCIsImZpbmQiLCJNZXRhciIsIk1WRlIiLCJOdW1iZXIiLCJwcm90b3R5cGUiLCJBcnJheSIsInN1YnN0ciIsImRsIiwiY3VycmVudFRhYiIsImNvbmZpZyIsIndpbmRvdyIsIndlYXRoZXJDb25maWciLCJjdXJyZW50TG9jYXRpb24iLCJsb2NhdGlvbnMiLCJnZXRMYW5nIiwidGFiU2hvd09ubHkiLCJjbGFzc05hbWUiLCJjc3MiLCJhZGRUYWIiLCJsYWJlbCIsInRhYnMiLCJhY3RpdmUiLCJidXR0b24iLCJjdXJyZW50VGFyZ2V0IiwibG9hZFdlYXRoZXIiLCJ0YWJOYW1lIiwibG9jYXRpb24iLCJsb2FkIiwidXJsIiwiZCIsInN0YXRpb24iLCJ0b1VwcGVyQ2FzZSIsImRpc3BsYXlEYXRhIiwicmV0IiwiZW1wdHkiLCJUYWYiLCJ0aGVuIiwiYXBwZW5kVGltZSIsInRpbWUiLCJjdXJyZW50RGF0ZSIsIm1vbnRoIiwiaG91ciIsIm1pbnV0ZSIsImluaXQiLCJtYWluQ29udGFpbmVyIiwic2VsZWN0aW9uIiwic2VsZWN0ZWQiLCJ2YWwiLCJsb2NzIiwiZmlsdGVyIiwibG9hZGluZ0ltZyIsImNvbnNvbGUiLCJ3YXJuIiwicG9saWN5IiwiZGVidWciLCJjYWNoZSIsInRpbWVvdXRIYW5kbGVyIiwicm91dGUiLCJyZWxvYWRBdCIsImxvYWREYXRhIiwiY2FjaGVOYW1lIiwiaGFzRXhwaXJlZCIsImxvZyIsImV4cGlyZUF0IiwiZ2V0SlNPTiIsImRvbmUiLCJuZXh0RXhwaXJhdGlvbiIsIkNhY2hlIiwiZmFpbCIsImNhY2hlRXhwaXJlQXQiLCJnZXRUaW1lIiwiY2F0Y2giLCJlcnIiLCJ3aGVuIiwiY2xlYXJUaW1lb3V0IiwiZGVsYXkiLCJzZXRUaW1lb3V0IiwiZnJlcXVlbmN5U2Vjb25kIiwicmV0cnlTZWNvbmQiLCJkYXRhVHMiLCJub3dUcyIsImRhdGFUc1Nob3VsZEJlIiwiZmxvb3IiLCJ0aWNrQWZ0ZXJEYXRhVHMiLCJjZWlsIiwiQ29udHJvbGxlciIsIkRvd25sb2FkTWFuYWdlciIsInRhZiIsIkRvd25sb2FkUG9saWN5IiwibWV0YXIiXSwibWFwcGluZ3MiOiJtQkFRQSxpQkFNSSxXQUFZQSxHQUNSQyxLQUFLQyxJQUFNRixFQUFJRyxXQUFXLE1BRTFCRixLQUFLRyxRQUFVSixFQUFJSyxPQUFTLEVBQzVCSixLQUFLSyxRQUFVTixFQUFJTyxNQUFRLEVBQzNCTixLQUFLTyxPQUFxRSxHQUEzRFAsS0FBS0csUUFBUUgsS0FBS0ssUUFBVUwsS0FBS0ssUUFBVUwsS0FBS0csU0FFL0RILEtBQUtRLFFBRUwsSUFBSSxJQUFJQyxFQUFFLEVBQUdBLEVBQUUsSUFBS0EsR0FBRyxHQUNuQlQsS0FBS1UsWUFBWUQsRUFBRyxRQUl4QixJQUFRQSxFQUFFLEdBQUlBLEVBQUUsSUFBS0EsR0FBRyxHQUNwQlQsS0FBS1csZ0JBQWdCRixHQUFH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Y3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmludGVyZmFjZSBDYXJkaW5hbE9wdGlvbiB7XG4gICAgY29sb3I/OiBzdHJpbmdcbiAgICB3aWR0aD86IG51bWJlclxuICAgIGhlaWdodD86IG51bWJlclxufVxuXG5cbmV4cG9ydCBjbGFzcyBXaW5kIHtcbiAgICBwcml2YXRlIGN0eDogYW55O1xuICAgIHByaXZhdGUgY2VudGVyWDogbnVtYmVyO1xuICAgIHByaXZhdGUgY2VudGVyWTogbnVtYmVyO1xuICAgIHByaXZhdGUgc3F1YXJlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihlbHQ6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY3R4ID0gZWx0LmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICB0aGlzLmNlbnRlclkgPSBlbHQuaGVpZ2h0IC8gMjtcbiAgICAgICAgdGhpcy5jZW50ZXJYID0gZWx0LndpZHRoIC8gMjtcbiAgICAgICAgdGhpcy5zcXVhcmUgPSAodGhpcy5jZW50ZXJZPnRoaXMuY2VudGVyWCA/IHRoaXMuY2VudGVyWCA6IHRoaXMuY2VudGVyWSkgKiAyO1xuXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgICBmb3IodmFyIGk9MDsgaTwzNjA7IGkrPTEwKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlNYXJrKGksIFwiIzg4OFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNlY29uZGFyeSBjYXJkaW5hbFxuICAgICAgICBmb3IodmFyIGk9NDU7IGk8MzYwOyBpKz05MCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5Q2FyZGluYWwoaSwgZmFsc2UsIHtjb2xvcjogXCIjY2VjZWNlXCJ9KTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUNhcmRpbmFsKGksIHRydWUsIHtjb2xvcjogXCIjZGZkZmRmXCJ9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByaW1hcnkgY2FyZGluYWxcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8MzYwOyBpKz05MCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5Q2FyZGluYWwoaSwgZmFsc2UsIHtjb2xvcjogXCIjY2NjXCJ9KTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUNhcmRpbmFsKGksIHRydWUsIHtjb2xvcjogXCIjZGRkXCJ9KTtcbiAgICAgICAgfVxuICAgIFxuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNlbnRlclgsIHRoaXMuY2VudGVyWSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkaXNwbGF5Q2FyZGluYWwoYW5nbGU6IG51bWJlciwgbGVmdDogYm9vbGVhbiwgb3B0PzogQ2FyZGluYWxPcHRpb24pIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBvcHQgPyBvcHQud2lkdGggfHwgdGhpcy5zcXVhcmUvMTUgOiB0aGlzLnNxdWFyZS8xNTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gb3B0ID8gb3B0LmhlaWdodCB8fCB0aGlzLnNxdWFyZS8yIDogdGhpcy5zcXVhcmUvMjtcbiAgICAgICAgY29uc3QgY29sb3IgPSBvcHQgPyBvcHQuY29sb3IgfHwgXCIjY2NjXCIgOiBcIiNjY2NcIjtcbiAgICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKHRoaXMuY2VudGVyWCwgdGhpcy5jZW50ZXJZKTtcbiAgICAgICAgdGhpcy5jdHgucm90YXRlKGFuZ2xlICogTWF0aC5QSSAvIDE4MCk7XG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhsZWZ0ID8gd2lkdGggOiAtd2lkdGgsIC13aWR0aCwgKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKDAsIC1oZWlnaHQpO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8oMCwgMCk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyhsZWZ0ID8gd2lkdGggOiAtd2lkdGgsIC13aWR0aCwgKTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRpc3BsYXlNYXJrKGFuZ2xlOiBudW1iZXIsIGNvbG9yPVwiIzAwMFwiKSB7XG4gICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZSh0aGlzLmNlbnRlclgsIHRoaXMuY2VudGVyWSk7XG4gICAgICAgIHRoaXMuY3R4LnJvdGF0ZShhbmdsZSAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oMCwgLXRoaXMuc3F1YXJlLzIpO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8oMCwgLSh0aGlzLnNxdWFyZS8yKSowLjk1KTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGU9Y29sb3I7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZGlzcGxheVdpbmQoYW5nbGU6IG51bWJlciwgZm9yY2UgPSBcIlwiLCBzaXplPTE4LCBjb2xvcj1cIiMxZDUyOGVcIikge1xuICAgICAgICBpZiAoYW5nbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC50cmFuc2xhdGUodGhpcy5jZW50ZXJYLCB0aGlzLmNlbnRlclkpO1xuICAgICAgICAgICAgdGhpcy5jdHgucm90YXRlKGFuZ2xlICogTWF0aC5QSSAvIDE4MCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oMCwgLXRoaXMuc3F1YXJlLzUpO1xuICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKDAsIC0odGhpcy5zcXVhcmUvMikqMC45Myk7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBhcnJvdyA9IHRoaXMuc3F1YXJlLzI1O1xuICAgICAgICAgICAgY29uc3Qgc2hhcnBlbiA9IDAuNTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKHRoaXMuY2VudGVyWCwgdGhpcy5jZW50ZXJZKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnJvdGF0ZShhbmdsZSAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKGFycm93ICogc2hhcnBlbiwgLWFycm93IC10aGlzLnNxdWFyZS81KTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbygwLCAtdGhpcy5zcXVhcmUvNSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oLWFycm93ICogc2hhcnBlbiwgLWFycm93IC10aGlzLnNxdWFyZS81KTtcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhhcnJvdyAqIHNoYXJwZW4sIC1hcnJvdyAtdGhpcy5zcXVhcmUvNSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgICB0aGlzLmN0eC50cmFuc2xhdGUodGhpcy5jZW50ZXJYLCB0aGlzLmNlbnRlclkpO1xuICAgICAgICB0aGlzLmN0eC5mb250ID0gYCR7c2l6ZX1weCBzYW5zIHNlcmlmYDtcbiAgICAgICAgdGhpcy5jdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIHRoaXMuY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgaWYgKGFuZ2xlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KGAke2FuZ2xlLnRvRml4ZWQoMCl9wrBgLCAwLCBzaXplLzEuOCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQoYCR7Zm9yY2V9YCwgMCwgLXNpemUvMS44KTtcbiAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7TWV0YXJEYXRhfSBmcm9tICcuL3dlYXRoZXInO1xuaW1wb3J0IHsgV2luZCB9IGZyb20gJy4vd2luZCc7XG5cbmV4cG9ydCBjbGFzcyBNZXRhciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29udGFpbmVyOiBKUXVlcnksXG4gICAgICAgIHByaXZhdGUgbGFuZzogc3RyaW5nLFxuICAgICkge31cblxuICAgIHB1YmxpYyBkaXNwbGF5KGRhdGE6IE1ldGFyRGF0YSk6IFByb21pc2U8TWV0YXJEYXRhPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZXM6IHtbbGFuZzogc3RyaW5nXToge1trZXk6IHN0cmluZ106IHN0cmluZ319ID0ge1xuICAgICAgICAgICAgICBmcjoge1xuICAgICAgICAgICAgICAgIHdpbmQ6ICdWZW50JyxcbiAgICAgICAgICAgICAgICB0ZW1wOiAnVGVtcCcsXG4gICAgICAgICAgICAgICAgZGV3OiAnUm9zw6llJyxcbiAgICAgICAgICAgICAgICBwcmVzc3VyZTogJ1ByZXNzaW9uJyxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAnVmlzaWJpbGl0w6knLFxuICAgICAgICAgICAgICAgIGVycm9yOiAnRXJyZXVyJyxcbiAgICAgICAgICAgICAgICByYXc6ICdPcmlnaW5hbCcsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVuOiB7XG4gICAgICAgICAgICAgICAgd2luZDogJ1dpbmQnLFxuICAgICAgICAgICAgICAgIHRlbXA6ICdUZW1wJyxcbiAgICAgICAgICAgICAgICBkZXc6ICdEZXcnLFxuICAgICAgICAgICAgICAgIHByZXNzdXJlOiAnUHJlc3N1cmUnLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICdWaXNpYmlsaXR5JyxcbiAgICAgICAgICAgICAgICBlcnJvcjogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICByYXc6ICdPcmlnaW5hbCcsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdpbmRcbiAgICAgICAgICAgIGlmIChkYXRhLndpbmRfc3BlZWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0galF1ZXJ5KCc8Y2FudmFzIGNsYXNzPVwid2luZFwiIHdpZHRoPVwiMTUwXCIgaGVpZ2h0PVwiMTUwXCI+PC9jYW52YXM+Jyk7XG4gICAgICAgICAgICAgIGNvbnN0IGVsdCA9IGNhbnZhcy5nZXQoMCkgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChjYW52YXMpO1xuICAgICAgICAgICAgICBuZXcgV2luZChlbHQpLmRpc3BsYXlXaW5kKFxuICAgICAgICAgICAgICAgIGRhdGEud2luZF9kaXJlY3Rpb24udmFsdWUsIFxuICAgICAgICAgICAgICAgIGAke2RhdGEud2luZF9zcGVlZC52YWx1ZX0gJHtkYXRhLnVuaXRzLndpbmRfc3BlZWR9YCxcbiAgICAgICAgICAgICAgICAxNSxcbiAgICAgICAgICAgICAgICAnI2NhMjAxNydcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRlbXBlcmF0dXJlc1xuICAgICAgICAgICAgaWYgKGRhdGEudGVtcGVyYXR1cmUpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZm9ybS1lbGVtZW50XCI+PGxhYmVsPicrdGl0bGVzW3RoaXMubGFuZ10udGVtcCsnOjwvbGFiZWw+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPicrIGRhdGEudGVtcGVyYXR1cmUudmFsdWUgKyc8ZW0+wrAnKyBkYXRhLnVuaXRzLnRlbXBlcmF0dXJlKyc8L2VtPjwvc3Bhbj48L2Rpdj4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLmRld3BvaW50KSB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZvcm0tZWxlbWVudFwiPjxsYWJlbD4nK3RpdGxlc1t0aGlzLmxhbmddLmRldysnOjwvbGFiZWw+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPicrIGRhdGEuZGV3cG9pbnQudmFsdWUgKyc8ZW0+wrAnKyBkYXRhLnVuaXRzLnRlbXBlcmF0dXJlKyc8L2VtPjwvc3Bhbj48L2Rpdj4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByZXNzdXJlXG4gICAgICAgICAgICBpZiAoZGF0YS5hbHRpbWV0ZXIpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZm9ybS1lbGVtZW50XCI+PGxhYmVsPicrdGl0bGVzW3RoaXMubGFuZ10ucHJlc3N1cmUrJzo8L2xhYmVsPjxzcGFuIGNsYXNzPVwidmFsdWVcIj4nKyBkYXRhLmFsdGltZXRlci52YWx1ZSArICc8ZW0+JyArIGRhdGEudW5pdHMuYWx0aW1ldGVyICsnPC9lbT48L3NwYW4+PC9kaXY+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW1hcmtzXG4gICAgICAgICAgICBpZiAoZGF0YS5yZW1hcmtzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlbWFya3M6IHtbbGFuZzogc3RyaW5nXToge1trZXk6IHN0cmluZ106IHN0cmluZ319ID0ge1xuICAgICAgICAgICAgICAgIGZyOntcbiAgICAgICAgICAgICAgICAgIE5PU0lHIDogJ0F1Y3VuIGNoYW5nZW1lbnQgc2lnbmlmaWNhdGlmIGRhbnMgbGVzIGRldXggaGV1cmVzIMOgIHZlbmlyJyxcbiAgICAgICAgICAgICAgICAgIEJFQ01HIDogJ0NoYW5nZW1lbnRzIHByw6l2dXMgZW50cmUgbGVzIGhldXJlcyBpbmRpcXXDqWVzJyxcbiAgICAgICAgICAgICAgICAgIEdSQURVIDogJ0NoYW5nZW1lbnRzIHByw6l2dXMgcXVpIHZhIGFycml2ZXIgcHJvZ3Jlc3NpdmVtZW50JyxcbiAgICAgICAgICAgICAgICAgIFJBUElEIDogJ0NoYW5nZW1lbnRzIHByw6l2dXMgcmFwaWRlbWVudCAoYXZhbnQgdW5lIGRlbWktaGV1cmUgZW4gbW95ZW5uZSknLFxuICAgICAgICAgICAgICAgICAgVEVNUE8gOiAnRmx1Y3R1YXRpb25zIHRlbXBvcmFpcmVzIGRhbnMgdW4gYmxvYyBkZSAxIMOgIDQgaGV1cmVzLicsXG4gICAgICAgICAgICAgICAgICBJTlRFUiA6ICdDaGFuZ2VtZW50cyBmcsOpcXVlbnRzIG1haXMgYnJlZnMnLFxuICAgICAgICAgICAgICAgICAgVEVORCAgOiAnVGVuZGFuY2UnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW46IHtcbiAgICAgICAgICAgICAgICAgIE5PU0lHIDogJ05vIHNpZ25pZmljYW50IGNoYW5nZScsXG4gICAgICAgICAgICAgICAgICBCRUNNRyA6ICdCZWNvbWluZycsXG4gICAgICAgICAgICAgICAgICBHUkFEVSA6ICdHcmFkdWFseScsXG4gICAgICAgICAgICAgICAgICBSQVBJRCA6ICdSYXBpZGx5JyxcbiAgICAgICAgICAgICAgICAgIFRFTVBPIDogJ1RlbXBvcmFyeSBjaGFuZ2VzIGV4cGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgIElOVEVSIDogJ0ludGVybWl0dGVudCcsXG4gICAgICAgICAgICAgICAgICBURU5EICA6ICdUcmVuZCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgdmFyIHJlbWFyayA9IHJlbWFya3NbdGhpcy5sYW5nXVtkYXRhLnJlbWFya3NdXG4gICAgICAgICAgICAgIGlmICghcmVtYXJrKSB7XG4gICAgICAgICAgICAgICAgcmVtYXJrID0gZGF0YS5yZW1hcmtzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZvcm0tZWxlbWVudFwiPjxsYWJlbD5SZW1hcnF1ZTo8L2xhYmVsPjxzcGFuIGNsYXNzPVwidmFsdWVcIj4nKyByZW1hcmsgKyc8L3NwYW4+PC9kaXY+JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsb3Vkc1xuICAgICAgICAgICAgaWYgKGRhdGEuY2xvdWRzICYmIGRhdGEuY2xvdWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICB2YXIgdHlwZXM6IHtbbGFuZzogc3RyaW5nXToge1trZXk6IHN0cmluZ106IHN0cmluZ319ID0ge1xuICAgICAgICAgICAgICAgIGZyOntcbiAgICAgICAgICAgICAgICAgIFNLQyA6ICdhdWN1biBudWFnZSBbU0tDXScsXG4gICAgICAgICAgICAgICAgICBGRVcgOiAncXVlbHF1ZXMgbnVhZ2VzLCAxLzggw6AgMi84IGR1IGNpZWwgY291dmVydCBbRkVXXScsXG4gICAgICAgICAgICAgICAgICBTQ1QgOiAnw6lwYXJzLCAzLzggw6AgNC84IGR1IGNpZWwgY291dmVydCBbU0NUXScsXG4gICAgICAgICAgICAgICAgICBCS04gOiAnZnJhZ21lbnTDqSwgNS84IMOgIDcvOCBkdSBjaWVsIGNvdXZlcnQgW0JLTl0nLFxuICAgICAgICAgICAgICAgICAgT1ZDIDogJ2NvdXZlcnQsIDgvOCBkdSBjaWVsIGNvdXZlcnQgW09WQ10nLFxuICAgICAgICAgICAgICAgICAgTlNDIDogJ2F1Y3VuIG51YWdlIGRcXCd1bmUgaGF1dGV1ciBpbmbDqXJpZXVyZSDDoCA1IDAwMCBwaWVkcyBvdSBzb3VzIGxcXCdhbHRpdHVkZSBtaW5pbWFsZSBkZSBzZWN0ZXVyIFtOU0NdJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuOntcbiAgICAgICAgICAgICAgICAgIFNLQyA6ICdza3kgW1NLQ10nLFxuICAgICAgICAgICAgICAgICAgRkVXIDogJ2ZldywgMS84IC0gMi84IFtGRVddJyxcbiAgICAgICAgICAgICAgICAgIFNDVCA6ICdzY2F0dGVyZWQsIDMvOCAtIDQvOCBbU0NUXScsXG4gICAgICAgICAgICAgICAgICBCS04gOiAnYnJva2VuLCA1LzggLSA3LzggW0JLTl0nLFxuICAgICAgICAgICAgICAgICAgT1ZDIDogJ292ZXJjYXN0LCA4LzggW09WQ10nLFxuICAgICAgICAgICAgICAgICAgTlNDIDogJ05vIHNpZ25pZmljYW50IGNsb3VkcyBbTlNDXScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgY2xvdWRzID0gZGF0YS5jbG91ZHMubWFwKChjbG91ZCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAnPGxpIGNsYXNzPVwiY2xvdWQtaXRlbVwiPjxzcGFuIGNsYXNzPVwiY2xvdWQtYWx0aXR1ZGVcIj5BbHQgJysgY2xvdWQuYWx0aXR1ZGUgKyAnICcgKyBkYXRhLnVuaXRzLmFsdGl0dWRlICsgJzo8L3NwYW4+ICcgKyB0eXBlc1t0aGlzLmxhbmddW2Nsb3VkLnR5cGVdICsgJzwvbGk+J1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmb3JtLWVsZW1lbnRcIj48bGFiZWw+TnVhZ2VzOjwvbGFiZWw+PHVsIGNsYXNzPVwidmFsdWVcIj4nKyBjbG91ZHMuam9pbihcIlxcblwiKSArJzwvdWw+PC9kaXY+JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFZpc2liaWxpdHlcbiAgICAgICAgICAgIGlmIChkYXRhLnZpc2liaWxpdHkpIHtcbiAgICAgICAgICAgICAgdmFyIHZpcyA9ICc8c3BhbiBjbGFzcz1cInZhbHVlXCI+JysgZGF0YS52aXNpYmlsaXR5LnZhbHVlICsnPGVtPicrIGRhdGEudW5pdHMudmlzaWJpbGl0eSsnPC9lbT48L3NwYW4+JztcbiAgICAgICAgICAgICAgaWYgKGRhdGEudmlzaWJpbGl0eS5yZXByID09IFwiQ0FWT0tcIikge1xuICAgICAgICAgICAgICAgIHZhciBjYXZvazoge1tsYW5nOiBzdHJpbmddOiBzdHJpbmd9ID0ge1xuICAgICAgICAgICAgICAgICAgZnI6ICdOdWFnZXMgZXQgdmlzaWJpbGl0w6kgc29udCBPSywnLFxuICAgICAgICAgICAgICAgICAgZW46ICdDZWlsaW5nIGFuZCB2aXNpYmlsaXR5IE9LJyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlzID0gJzxzcGFuIGNsYXNzPVwidmFsdWVcIj4nICsgY2F2b2tbdGhpcy5sYW5nXSArICc8L3NwYW4+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmb3JtLWVsZW1lbnRcIj48bGFiZWw+Jyt0aXRsZXNbdGhpcy5sYW5nXS52aXNpYmlsaXR5Kyc6PC9sYWJlbD4nICsgdmlzICsgJzwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmF3IE1ldGFyXG4gICAgICAgICAgICBpZiAoZGF0YS5yYXcpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZm9ybS1lbGVtZW50XCI+PGxhYmVsPicgKyB0aXRsZXNbdGhpcy5sYW5nXS5yYXcgKyAnOjwvbGFiZWw+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPicrIGRhdGEucmF3ICsnPC9zcGFuPjwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICB9XG59IiwiaW1wb3J0IHtNZXRhckRhdGEsIFRhZkRhdGF9IGZyb20gJy4vd2VhdGhlcic7XG5pbXBvcnQge0ZvcmVjYXN0fSBmcm9tICcuL3dlYXRoZXInOyBcbmltcG9ydCB7TWV0YXJ9IGZyb20gJy4vbWV0YXInO1xuXG5leHBvcnQgY2xhc3MgVGFmIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb250YWluZXI6IEpRdWVyeSxcbiAgICAgICAgcHJpdmF0ZSBsYW5nOiBzdHJpbmcsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGRpc3BsYXkoZGF0YTogVGFmRGF0YSk6IFByb21pc2U8VGFmRGF0YT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdmFyIGZvcmVjYXN0OiB7W25hbWU6IHN0cmluZ106IHtcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IEpRdWVyeVxuICAgICAgICAgICAgICAgIHRpbWVsaW5lOiBKUXVlcnlcbiAgICAgICAgICAgICAgICBkYXRhOiBhbnlcbiAgICAgICAgICAgIH19ID0ge307XG4gICAgICBcbiAgICAgICAgICAgIGlmICghZGF0YS5mb3JlY2FzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZsaWdodCBydWxlcyBzd2l0Y2hcbiAgICAgICAgICAgIGNvbnN0IHN3aXRjaEJveCA9IGpRdWVyeSgnPGRpdiBjbGFzcz1cInN3aXRjaC1ib3hcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgIHN3aXRjaEJveC5hcHBlbmQoJzxsYWJlbCBmb3I9XCJkZWZhdWx0XCIgY2xhc3M9XCJzd2l0Y2gtYm94LWxhYmVsXCI+TVZGUjwvbGFiZWw+Jyk7XG4gICAgICAgICAgICBjb25zdCBzd2l0Y2hCdG4gPSBqUXVlcnkoJzxpbnB1dCBpZD1cImRlZmF1bHRcIiBjbGFzcz1cInN3aXRjaC1ib3gtaW5wdXRcIiB0eXBlPVwiY2hlY2tib3hcIiAvPicpO1xuICAgICAgICAgICAgc3dpdGNoQm94LmFwcGVuZChzd2l0Y2hCdG4pO1xuICAgICAgICAgICAgc3dpdGNoQm94LmFwcGVuZCgnPGxhYmVsIGZvcj1cImRlZmF1bHRcIiBjbGFzcz1cInN3aXRjaC1ib3gtc2xpZGVyXCI+PC9sYWJlbD4nKTtcbiAgICAgICAgICAgIHN3aXRjaEJveC5hcHBlbmQoJzxsYWJlbCBmb3I9XCJkZWZhdWx0XCIgY2xhc3M9XCJzd2l0Y2gtYm94LWxhYmVsXCI+SUZSPC9sYWJlbD4nKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChzd2l0Y2hCb3gpO1xuICAgICAgXG4gICAgICAgICAgICBzd2l0Y2hCdG4ub24oJ2NoYW5nZScsIChldmVudDogSlF1ZXJ5LkNoYW5nZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIHZhciBmbGlnaHRSdWxlID0gKGpRdWVyeShldmVudC50YXJnZXQpLmlzKFwiOmNoZWNrZWRcIikpID8gJ0lGUic6J01WRlInO1xuICAgICAgXG4gICAgICAgICAgICAgIE9iamVjdC5rZXlzKGZvcmVjYXN0KS5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yZWNhc3RbbmFtZV0uY29udGFpbmVyLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgXG4gICAgICAgICAgICAgIGlmIChmb3JlY2FzdFtmbGlnaHRSdWxlXSAmJmZvcmVjYXN0W2ZsaWdodFJ1bGVdLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIGZvcmVjYXN0W2ZsaWdodFJ1bGVdLmNvbnRhaW5lci5hZGRDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgXG4gICAgICAgICAgICB2YXIgZm9yZWNhc3RDb250YWluZXIgPSBqUXVlcnkoJzxkaXYgY2xhc3M9XCJmb3JlY2FzdFwiPjwvZGl2PicpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGZvcmVjYXN0Q29udGFpbmVyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGF0YS5mb3JlY2FzdC5mb3JFYWNoKChlbHQ6IEZvcmVjYXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBqUXVlcnkoJzxkaXYgY2xhc3M9XCInICsgZWx0LmZsaWdodF9ydWxlcyArICdcIj48L2Rpdj4nKSxcbiAgICAgICAgICAgICAgICAgICAgdGltZWxpbmU6IGpRdWVyeSgnPGRpdiBjbGFzcz1cInRpbWVsaW5lXCI+PC9kaXY+JyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBmb3JlY2FzdENvbnRhaW5lci5hcHBlbmQoZm9yZWNhc3RbZWx0LmZsaWdodF9ydWxlc10uY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yZWNhc3RbZWx0LmZsaWdodF9ydWxlc10uY29udGFpbmVyLmFwcGVuZChmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS50aW1lbGluZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yZWNhc3RbZWx0LmZsaWdodF9ydWxlc10uZGF0YVtlbHQuZW5kX3RpbWUuZHRdID0gZWx0O1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhckxpa2UgPSAgZWx0IGFzIGFueTtcbiAgICAgICAgICAgICAgICBtZXRhckxpa2UuZnJhbWUgPSBqUXVlcnkoJzxkaXYgY2xhc3M9XCJ0YWJcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yZWNhc3RbZWx0LmZsaWdodF9ydWxlc10uY29udGFpbmVyLmFwcGVuZChtZXRhckxpa2UuZnJhbWUpO1xuICAgICAgICAgICAgICAgIG1ldGFyTGlrZS51bml0cyA9IGRhdGEudW5pdHM7XG4gICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IERhdGUoZWx0LmVuZF90aW1lLmR0KTtcbiAgICAgICAgICAgICAgICB2YXIgYnRuID0galF1ZXJ5KCc8YnV0dG9uIGNsYXNzPVwidGltZS10YWJcIj4nICsgdC5nZXREYXRlKCkubGVhZGluZygyKSArICcvJyArIHQuZ2V0TW9udGgoKSArICcgJyArIHQuZ2V0SG91cnMoKS5sZWFkaW5nKDIpICsgJzonICsgdC5nZXRNaW51dGVzKCkubGVhZGluZygyKSArICc8L2J1dHRvbj4nKTtcbiAgICAgICAgICAgICAgICBmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS50aW1lbGluZS5hcHBlbmQoYnRuKTtcbiAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS5kYXRhKS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS5kYXRhW2VsdC5lbmRfdGltZS5kdF0uZnJhbWUuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgYnRuLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgIFxuICAgICAgICAgICAgICAgIGJ0bi5vbignY2xpY2snLCAoZXZlbnQ6IEpRdWVyeS5DbGlja0V2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmVjYXN0W2VsdC5mbGlnaHRfcnVsZXNdLnRpbWVsaW5lLmNoaWxkcmVuKCkuZWFjaCgoaW5kZXg6IG51bWJlciwgZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShlbGVtZW50KS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeShldmVudC50YXJnZXQpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yZWNhc3RbZWx0LmZsaWdodF9ydWxlc10uY29udGFpbmVyLmZpbmQoJ2Rpdi50YWInKS5lYWNoKChpbmRleDogbnVtYmVyLCBlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KGVsZW1lbnQpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yZWNhc3RbZWx0LmZsaWdodF9ydWxlc10uZGF0YVtlbHQuZW5kX3RpbWUuZHRdLmZyYW1lLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBNZXRhcihtZXRhckxpa2UuZnJhbWUsIHRoaXMubGFuZykuZGlzcGxheShtZXRhckxpa2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgICAgIGZvcmVjYXN0Lk1WRlIuY29udGFpbmVyLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgICAvLyBSYXcgVGFmXG4gICAgICAgICAgICBpZiAoZGF0YS5yYXcpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZm9ybS1lbGVtZW50XCI+PGxhYmVsPlRhZjo8L2xhYmVsPjxzcGFuIGNsYXNzPVwidmFsdWVcIj4nKyBkYXRhLnJhdyArJzwvc3Bhbj48L2Rpdj4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgIFxuICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICB9XG59IiwiaW1wb3J0IHtDb25maWcsIExvY2F0aW9uLCBNZXRhckRhdGEsIFRhZkRhdGEsIE1ldGFEYXRhLCBXZWF0aGVyRGF0YX0gZnJvbSAnLi93ZWF0aGVyJztcbmltcG9ydCB7TWV0YXJ9IGZyb20gJy4vbWV0YXInO1xuaW1wb3J0IHtUYWZ9IGZyb20gJy4vdGFmJztcbmltcG9ydCB7RG93bmxvYWRNYW5hZ2VyfSBmcm9tICcuL2Rvd25sb2FkLW1hbmFnZXInO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gICAgaW50ZXJmYWNlIE51bWJlciB7XG4gICAgICAgIGxlYWRpbmc6IChzaXplOiBudW1iZXIsIGxlYWRpbmc/OiBzdHJpbmcpID0+IHN0cmluZztcbiAgICB9XG59XG5cbk51bWJlci5wcm90b3R5cGUubGVhZGluZyA9IGZ1bmN0aW9uKHNpemU6IG51bWJlciwgbGVhZGluZyA9ICcwJykgOiBzdHJpbmcge1xuICAgIHJldHVybiAoQXJyYXkoc2l6ZSkuZmlsbChsZWFkaW5nKS5qb2luKCcnKSArIHRoaXMpLnN1YnN0cigtc2l6ZSk7XG59XG5cblxuZXhwb3J0IGNsYXNzIENvbnRyb2xsZXIge1xuXG4gICAgcHJpdmF0ZSBjb25maWc6IENvbmZpZztcbiAgICBwcml2YXRlIGN1cnJlbnRUYWIgPSAnbWV0YXInO1xuICAgIHByaXZhdGUgY3VycmVudExvY2F0aW9uOiBMb2NhdGlvbjtcblxuXG4gICAgY29uc3RydWN0b3IgKHByaXZhdGUgZGw6IERvd25sb2FkTWFuYWdlcikge1xuICAgICAgICB0aGlzLmNvbmZpZyA9ICh3aW5kb3cgYXMgYW55KS53ZWF0aGVyQ29uZmlnIGFzIENvbmZpZztcbiAgICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSB0aGlzLmNvbmZpZy5sb2NhdGlvbnNbMF07XG4gICAgfVxuXG4gICAgLy8gZ2V0TGFuZyBwcm92aWRlcyB0aGUgbGFuZ3VhZ2VcbiAgICBnZXRMYW5nICgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcubGFuZyA9PSAnZnInID8gdGhpcy5jb25maWcubGFuZyA6ICdlbic7XG4gICAgfTtcblxuICAgIC8vIHRhYlNob3dPbmx5IGhpZGVzIGFsbCB0YWJzIGFuZCBzaG93IG9ubHkgdGhlIHNwZWNpZmllZHMgb25lXG4gICAgdGFiU2hvd09ubHkoY2xhc3NOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgalF1ZXJ5KCdkaXYud2VhdGhlci13aWRnZXQtcGxhY2Vob2xkZXInKS5jaGlsZHJlbigpLmVhY2goKGluZGV4OiBudW1iZXIsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBqUXVlcnkoZWxlbWVudCkuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKTtcbiAgICAgICAgICAgIGpRdWVyeSgnLicgKyBjbGFzc05hbWUpLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIGFkZFRhYiBhZGRzIGEgbmV3IHRhYiBpbiB0aGUgbWFpbiBjb250YWluZXJcbiAgICBhZGRUYWIobmFtZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nLCB0YWJzOiBKUXVlcnksIGNvbnRhaW5lcjogSlF1ZXJ5LCBhY3RpdmU9ZmFsc2UpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0galF1ZXJ5KCc8YnV0dG9uIGNsYXNzPVwiJyArIChhY3RpdmUgPyAnc2VsZWN0ZWQnIDogJycpICsgICdcIj4nICsgbGFiZWwgKyAnPC9idXR0b24+Jyk7XG4gICAgICAgIGJ1dHRvbi5vbignY2xpY2snLCAoZXZlbnQ6IEpRdWVyeS5DbGlja0V2ZW50KSA9PiB7XG4gICAgICAgICAgICB0YWJzLmNoaWxkcmVuKCkuZWFjaCgoaW5kZXg6IG51bWJlciwgZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGpRdWVyeShldmVudC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcblxuICAgICAgICAgICAgdGhpcy50YWJTaG93T25seSgnd2VhdGhlci1sb2FkaW5nJyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSBuYW1lO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmxvYWRXZWF0aGVyKG5hbWUsIHRoaXMuY3VycmVudExvY2F0aW9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGFicy5hcHBlbmQoYnV0dG9uKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cInRhYi0nICsgbmFtZSArICdcIj48L2Rpdj4nKTtcbiAgICB9XG5cbiAgICBsb2FkV2VhdGhlcih0YWJOYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBMb2NhdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLmRsLmxvYWQodGhpcy5jb25maWcudXJsW3RhYk5hbWVdLCB0YWJOYW1lLCBsb2NhdGlvbiwgdGhpcy5nZXRMYW5nKCksIChkOiBXZWF0aGVyRGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gdGFiTmFtZSArICctJyArIGQuc3RhdGlvbi50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnRhYlNob3dPbmx5KCd0YWItJyArIHRhYk5hbWUpO1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5RGF0YSh0YWJOYW1lLCBqUXVlcnkoJ2Rpdi50YWItJyArIHRhYk5hbWUpLCBkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gZGlzcGxheURhdGEgaXMgdGggbWFpbiBmb25jdGlvbiBmb3IgZGlzcGxheWluZyBkYXRhIGZyb20gdGhlIEFQSVxuICAgIGRpc3BsYXlEYXRhKHRhYk5hbWU6IHN0cmluZywgY29udGFpbmVyOiBKUXVlcnksIGRhdGE6IFdlYXRoZXJEYXRhKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgY29uc3QgbGFuZyA9IHRoaXMuZ2V0TGFuZygpO1xuXG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgICAgIC8vIEhhbmRsZSBlcnJvclxuICAgICAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgY29uc3QgdGl0bGVzOiB7W2xhbmc6IHN0cmluZ106IHN0cmluZ30gPSB7XG4gICAgICAgICAgICAgICAgZnI6ICdFcnJldXInLFxuICAgICAgICAgICAgICAgIGVuOiAnRXJyb3InLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZvcm0tZWxlbWVudFwiPjxsYWJlbD4nK3RpdGxlc1tsYW5nXSsnOjwvbGFiZWw+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPicgKyBkYXRhLmVycm9yICsgJzwvc3Bhbj48L2Rpdj4nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7cmVqZWN0KHRpdGxlc1tsYW5nXSk7fSk7XG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgdmFyIHJldDogUHJvbWlzZTxXZWF0aGVyRGF0YT47XG4gICAgICAgIHN3aXRjaCAodGFiTmFtZSkge1xuICAgICAgICBjYXNlICdtZXRhcic6XG4gICAgICAgICAgICByZXQgPSBuZXcgTWV0YXIoY29udGFpbmVyLCBsYW5nKS5kaXNwbGF5KGRhdGEgYXMgTWV0YXJEYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0YWYnOlxuICAgICAgICAgICAgcmV0ID0gbmV3IFRhZihjb250YWluZXIsIGxhbmcpLmRpc3BsYXkoZGF0YSBhcyBUYWZEYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge3JlamVjdChcIm5vIGRpc3BsYXllciBmb3IgXCIgKyB0YWJOYW1lKTt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZFRpbWUoY29udGFpbmVyLCBkYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAgLy8gYXBwZW5kVGltZSBkaXNwbGF5cyB0aGUgdGltZSBhcyBhIGNhbGVuZGFyXG4gICAgYXBwZW5kVGltZShjb250YWluZXI6IEpRdWVyeSwgZGF0YTogTWV0YURhdGEpIHtcbiAgICAgICAgY29uc3QgbGFuZyA9IHRoaXMuZ2V0TGFuZygpO1xuXG4gICAgICAgIGlmIChkYXRhLnRpbWUpIHtcbiAgICAgICAgdmFyIG1vbnRoczoge1tsYW5nOiBzdHJpbmddOiBzdHJpbmdbXX0gPSB7XG4gICAgICAgICAgICBmcjogWydKYW4nLCAnRmV2JywgJ01hcicsICdBdnInLCAnTWFpJywgJ0p1bicsICdKdWwnLCAnQW91JywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLFxuICAgICAgICAgICAgZW46IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoZGF0YS50aW1lLmR0KTtcbiAgICAgICAgdmFyIG1vbnRoID0gbW9udGhzW2xhbmddW2N1cnJlbnREYXRlLmdldE1vbnRoKCktMV07XG4gICAgICAgIHZhciBob3VyID0gIGN1cnJlbnREYXRlLmdldEhvdXJzKCkubGVhZGluZygyKTtcbiAgICAgICAgdmFyIG1pbnV0ZSA9IGN1cnJlbnREYXRlLmdldE1pbnV0ZXMoKS5sZWFkaW5nKDIpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImRhdGVcIj48c3BhbiBjbGFzcz1cIm1vbnRoXCI+JyArIG1vbnRoICsgJzwvc3Bhbj48c3BhbiBjbGFzcz1cImRheVwiPicrIGN1cnJlbnREYXRlLmdldERhdGUoKSArJzwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJzxzcGFuIGNsYXNzPVwidGltZVwiPicrIGhvdXIgKyc6JysgbWludXRlICsnPC9zcGFuPicpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIGluaXQobWFpbkNvbnRhaW5lcjogSlF1ZXJ5KSB7XG4gICAgICAgIGlmIChtYWluQ29udGFpbmVyLmxlbmd0aCA9PSAwIHx8ICF0aGlzLmNvbmZpZyB8fCAhdGhpcy5jb25maWcubG9jYXRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5jb25maWcubG9jYXRpb25zLmxlbmd0aCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJbd2VhdGhlcl1cIiwgXCJtaXNzaW5nIGxvY2F0aW9uc1wiKVxuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFyIGFsbFxuICAgICAgICBtYWluQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIHZhciBsYW5nID0gdGhpcy5nZXRMYW5nKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdGl0bGVcbiAgICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmQoJzxoMyBjbGFzcz1cIndlYXRoZXItdGl0bGVcIj48L2gzJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgc3RhdGlvbiBzZWxlY3RvclxuICAgICAgICB2YXIgc2VsZWN0aW9uID0galF1ZXJ5KCc8c2VsZWN0IGNsYXNzPVwid2VhdGhlci1sb2NhdGlvbi1zZWxlY3RcIj48L3NlbGVjdD4nKTtcbiAgICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmQoc2VsZWN0aW9uKTtcbiAgICAgICAgdGhpcy5jb25maWcubG9jYXRpb25zLmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgIHZhciBzZWxlY3RlZCA9IGluZGV4ICA/ICcnIDogJ3NlbGVjdGVkJztcbiAgICAgICAgc2VsZWN0aW9uLmFwcGVuZCgnPG9wdGlvbiB2YWx1ZT1cIicgKyBlbGVtZW50Lm5hbWUgKyAnXCIgJyArIHNlbGVjdGVkICsgJz4nICsgZWxlbWVudC5uYW1lICsnICgnICsgZWxlbWVudC5sYWJlbCArICcpPC9vcHRpb24+Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxlY3Rpb24ub24oJ2NoYW5nZScsIChldmVudDogSlF1ZXJ5LkNoYW5nZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBqUXVlcnkoZXZlbnQudGFyZ2V0KS5jaGlsZHJlbihcIm9wdGlvbjpzZWxlY3RlZFwiKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBsb2NzID0gdGhpcy5jb25maWcubG9jYXRpb25zLmZpbHRlcigoZWx0OiBMb2NhdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbHQubmFtZSA9PSBgJHtsb2NhdGlvbn1gO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobG9jcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gbG9jc1swXTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhYlNob3dPbmx5KFwid2VhdGhlci1sb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZFdlYXRoZXIodGhpcy5jdXJyZW50VGFiID8gdGhpcy5jdXJyZW50VGFiIDogJ21ldGFyJywgbG9jc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBUYWJcbiAgICAgICAgdmFyIHRhYnMgPSBqUXVlcnkoJzxkaXYgY2xhc3M9XCJ0YWJzXCI+PC9kaXY+Jyk7XG4gICAgICAgIG1haW5Db250YWluZXIuYXBwZW5kKHRhYnMpO1xuICAgIFxuICAgIFxuICAgICAgICAvLyBBZGQgZGF0YSBjb250YWluZXJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGpRdWVyeSgnPGRpdiBjbGFzcz1cIndlYXRoZXItd2lkZ2V0LXBsYWNlaG9sZGVyXCI+PC9kaXY+Jyk7XG4gICAgICAgIG1haW5Db250YWluZXIuYXBwZW5kKGNvbnRhaW5lcik7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJzxpbWcgY2xhc3M9XCJ3ZWF0aGVyLWxvYWRpbmdcIiBzcmM9XCInICsgdGhpcy5jb25maWcubG9hZGluZ0ltZyArICdcIj4nKTtcbiAgICAgICAgdGhpcy5hZGRUYWIoJ21ldGFyJywgJ01ldGFyJywgdGFicywgY29udGFpbmVyLCB0cnVlKTtcbiAgICAgICAgdGhpcy5hZGRUYWIoJ3RhZicsICdUYWYnLCB0YWJzLCBjb250YWluZXIpO1xuICAgIFxuICAgICAgICAvLyBEaWNsYWltZXJcbiAgICAgICAgdmFyIGRpc2NsYWltZXI6IHtbbGFuZzogc3RyaW5nXTogc3RyaW5nfSA9IHtcbiAgICAgICAgZnI6ICdUb3V0ZXMgbGVzIGRvbm7DqWVzIHByw6lzZW50w6llcyBzdXIgY2Ugc2l0ZSBzb250IG5vbiBjZXJ0aWZpw6llcyA6IGVsbGVzIGRvaXZlbnQgw6p0cmUgc3lzdMOpbWF0aXF1ZW1lbnQgY29udHJvbMOpZXMgw6AgcGFydGlyIGRlIGRvbm7DqWVzIG9mZmljaWVsbGVzJyxcbiAgICAgICAgZW46ICdBbGwgdGhlIGRhdGEgcHJlc2VudGVkIG9uIHRoaXMgc2l0ZSBhcmUgbm90IGNlcnRpZmllZDogdGhleSBtdXN0IGJlIHN5c3RlbWF0aWNhbGx5IGNoZWNrZWQgZnJvbSBvZmZpY2lhbCBkYXRhJyxcbiAgICAgICAgfTtcbiAgICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJkaXNjbGFpbWVyXCI+PHNwYW4gY2xhc3M9XCJkYXNoaWNvbnMgZGFzaGljb25zLXdhcm5pbmdcIj48L3NwYW4+JyArIGRpc2NsYWltZXJbbGFuZ10gKyAnPC9kaXY+Jyk7XG4gICAgXG4gICAgICAgIGlmICghdGhpcy5jb25maWcubG9jYXRpb25zIHx8IHRoaXMuY29uZmlnLmxvY2F0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdGhpcy5sb2FkV2VhdGhlcignbWV0YXInLCB0aGlzLmNvbmZpZy5sb2NhdGlvbnNbMF0pO1xuICAgIH1cbn0iLCJpbXBvcnQge1dlYXRoZXJEYXRhLCBNZXRhRGF0YSwgTG9jYXRpb259IGZyb20gJy4vd2VhdGhlcic7XG5cbmV4cG9ydCBjbGFzcyBEb3dubG9hZE1hbmFnZXIge1xuICAgIHByaXZhdGUgY2FjaGU6IHtbaWQ6IHN0cmluZ106IENhY2hlfSA9IHt9XG4gICAgcHJpdmF0ZSB0aW1lb3V0SGFuZGxlcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwb2xpY3k6IHtbdGFiTmFtZTogc3RyaW5nXTogRG93bmxvYWRQb2xpY3l9LFxuICAgICAgICBwcml2YXRlIGRlYnVnID0gZmFsc2UsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGxvYWQocm91dGU6IHN0cmluZywgdGFiTmFtZTogc3RyaW5nLCBsb2NhdGlvbjogTG9jYXRpb24sIGxhbmc6IHN0cmluZywgZGlzcGxheTogKGQ6IFdlYXRoZXJEYXRhKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVsb2FkQXQobnVsbCwgcm91dGUsIHRhYk5hbWUsIGxvY2F0aW9uLCBsYW5nLCBkaXNwbGF5KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWREYXRhKHJvdXRlOiBzdHJpbmcsIHRhYk5hbWU6IHN0cmluZywgbG9jYXRpb246IExvY2F0aW9uLCBsYW5nOiBzdHJpbmcsIGRpc3BsYXk6IChkOiBXZWF0aGVyRGF0YSkgPT4gdm9pZCk6ICBQcm9taXNlPENhY2hlPiB7XG4gICAgICAgIGNvbnN0IGNhY2hlTmFtZSA9IHRoaXMuY2FjaGVOYW1lKHRhYk5hbWUsIGxvY2F0aW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5jYWNoZVtjYWNoZU5hbWVdO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5kZWJ1ZyAmJiBjYWNoZSAmJiBjYWNoZS5oYXNFeHBpcmVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0NBQ0hFXSBleHBpcmVkIGF0JywgY2FjaGUuZXhwaXJlQXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoY2FjaGUgJiYgIWNhY2hlLmhhc0V4cGlyZWQoKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ0FDSEVdJywgY2FjaGVOYW1lLCBjYWNoZS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoY2FjaGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBqUXVlcnkuZ2V0SlNPTihcbiAgICAgICAgICAgICAgICBbcm91dGUsIGxvY2F0aW9uLm5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICAoKSA9PiB7fSxcbiAgICAgICAgICAgICkuZG9uZShcbiAgICAgICAgICAgICAgICAoZGF0YTogV2VhdGhlckRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbR0VUXScsIGNhY2hlTmFtZSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0RXhwaXJhdGlvbiA9IHRoaXMucG9saWN5W3RhYk5hbWVdID8gdGhpcy5wb2xpY3lbdGFiTmFtZV0ubmV4dEV4cGlyYXRpb24oZGF0YSkgOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVbY2FjaGVOYW1lXSA9IG5ldyBDYWNoZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0RXhwaXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuY2FjaGVbY2FjaGVOYW1lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKS5mYWlsKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QobGFuZyA9PSAnZnInID8gJ1NhcGVybGlwb3BldHRlICEgamUgblxcJ2Fycml2ZSBwYXMgw6AgcsOpY3Vww6lyZXIgbGVzIGRvbm7DqWVzLicgOiAnT01HICEgSVxcJ20gbm90IGFibGUgdG8gcmV0cmlldmUgZGF0YS4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS50aGVuKChjYWNoZTogYW55KSA9PiB7XG4gICAgICAgICAgICBkaXNwbGF5KChjYWNoZSBhcyBDYWNoZSkuZGF0YSk7XG4gICAgICAgICAgICBjb25zdCBjYWNoZUV4cGlyZUF0ID0gKGNhY2hlIGFzIENhY2hlKS5leHBpcmVBdDtcblxuICAgICAgICAgICAgaWYgKChjYWNoZUV4cGlyZUF0Py5nZXRUaW1lKCkgfHwgMCk+IG5ldyBEYXRlKCkuZ2V0VGltZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3dpbGwgcmVsb2FkJywgdGFiTmFtZSwgbG9jYXRpb24ubmFtZSwgJ2F0JywgYCR7Y2FjaGVFeHBpcmVBdD8uZ2V0SG91cnMoKX06JHtjYWNoZUV4cGlyZUF0Py5nZXRNaW51dGVzKCl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVsb2FkQXQoY2FjaGVFeHBpcmVBdCwgcm91dGUsIHRhYk5hbWUsIGxvY2F0aW9uLCBsYW5nLCBkaXNwbGF5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlO1xuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyKTtcbiAgICAgICAgICAgIGRpc3BsYXkoe2Vycm9yOiBlcnIsIHN0YXRpb246IGxvY2F0aW9uLm5hbWV9IGFzIFdlYXRoZXJEYXRhKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbG9hZEF0KHdoZW46IERhdGUgfCBudWxsLCByb3V0ZTogc3RyaW5nLCB0YWJOYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBMb2NhdGlvbiwgbGFuZzogc3RyaW5nLCBkaXNwbGF5OiAoZDogV2VhdGhlckRhdGEpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudGltZW91dEhhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dEhhbmRsZXIpO1xuICAgICAgICAgICAgdGhpcy50aW1lb3V0SGFuZGxlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdoZW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5sb2FkRGF0YShyb3V0ZSwgdGFiTmFtZSwgbG9jYXRpb24sIGxhbmcsIGRpc3BsYXkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVsYXkgPSB3aGVuLmdldFRpbWUoKSAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBpZiAoZGVsYXkgPD0gMTAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWxvYWRBdChudWxsLCByb3V0ZSwgdGFiTmFtZSwgbG9jYXRpb24sIGxhbmcsIGRpc3BsYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50aW1lb3V0SGFuZGxlciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkRGF0YShyb3V0ZSwgdGFiTmFtZSwgbG9jYXRpb24sIGxhbmcsIGRpc3BsYXkpO1xuICAgICAgICB9LCBkZWxheSkgYXMgYW55O1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FjaGVOYW1lKHRhYk5hbWU6IHN0cmluZywgbG9jYXRpb246IExvY2F0aW9uKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RhYk5hbWV9LSR7bG9jYXRpb24ubmFtZX1gO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERvd25sb2FkUG9saWN5IHtcbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHByaXZhdGUgZnJlcXVlbmN5U2Vjb25kOiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgcmV0cnlTZWNvbmQ6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgbmV4dEV4cGlyYXRpb24oZGF0YTogTWV0YURhdGEpOiBEYXRlIHwgbnVsbCB7XG4gICAgICAgIGlmICh0aGlzLmZyZXF1ZW5jeVNlY29uZDw9MCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhVHMgPSBuZXcgRGF0ZShkYXRhLnRpbWUuZHQpLmdldFRpbWUoKTtcbiAgICAgICAgY29uc3Qgbm93VHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICBjb25zdCBkYXRhVHNTaG91bGRCZSA9IE1hdGguZmxvb3Iobm93VHMgLyAodGhpcy5mcmVxdWVuY3lTZWNvbmQgKiAxMDAwKSkgKiB0aGlzLmZyZXF1ZW5jeVNlY29uZCAqIDEwMDA7XG4gICAgICAgIGNvbnN0IHRpY2tBZnRlckRhdGFUcyA9IE1hdGguY2VpbChub3dUcyAvICh0aGlzLmZyZXF1ZW5jeVNlY29uZCAqIDEwMDApKSAqIHRoaXMuZnJlcXVlbmN5U2Vjb25kICogMTAwMDtcbiAgICAgICAgXG4gICAgICAgIGlmIChkYXRhVHNTaG91bGRCZSA9PSBkYXRhVHMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aWNrQWZ0ZXJEYXRhVHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMucmV0cnlTZWNvbmQqMTAwMCArIG5vd1RzKTtcbiAgICB9XG59XG5cblxuY2xhc3MgQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZGF0YTogV2VhdGhlckRhdGEsXG4gICAgICAgIHB1YmxpYyBleHBpcmVBdDogRGF0ZSB8IG51bGwsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGhhc0V4cGlyZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmV4cGlyZUF0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwaXJlQXQuZ2V0VGltZSgpPCAobmV3IERhdGUoKS5nZXRUaW1lKCkgKyAxMDAwKTtcbiAgICB9XG59IiwiaW1wb3J0IHtDb250cm9sbGVyfSBmcm9tICcuL2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgRG93bmxvYWRNYW5hZ2VyLCBEb3dubG9hZFBvbGljeSB9IGZyb20gJy4vZG93bmxvYWQtbWFuYWdlcic7XG5cbmpRdWVyeSgoKSA9PiB7XG4gICAgXG4gICAgbmV3IENvbnRyb2xsZXIoXG4gICAgICAgIG5ldyBEb3dubG9hZE1hbmFnZXIoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGFmOiBuZXcgRG93bmxvYWRQb2xpY3koXG4gICAgICAgICAgICAgICAgICAgIDMqNjAqNjAsXG4gICAgICAgICAgICAgICAgICAgIDEwKjYwLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgbWV0YXI6IG5ldyBEb3dubG9hZFBvbGljeShcbiAgICAgICAgICAgICAgICAgICAgMzAqNjAsXG4gICAgICAgICAgICAgICAgICAgIC8vNSo2MCxcbiAgICAgICAgICAgICAgICAgICAgMio2MCxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgIClcbiAgICApLmluaXQoalF1ZXJ5KCdkaXYud2VhdGhlci1wbHVnaW4nKSk7XG59KTsiXSwic291cmNlUm9vdCI6IiJ9