(()=>{"use strict";var e=function(){function e(e){this.ctx=e.getContext("2d"),this.centerY=e.height/2,this.centerX=e.width/2,this.square=2*(this.centerY>this.centerX?this.centerX:this.centerY),this.clear();for(var t=0;t<360;t+=10)this.displayMark(t,"#888");for(t=45;t<360;t+=90)this.displayCardinal(t,!1,{color:"#cecece"}),this.displayCardinal(t,!0,{color:"#dfdfdf"});for(t=0;t<360;t+=90)this.displayCardinal(t,!1,{color:"#ccc"}),this.displayCardinal(t,!0,{color:"#ddd"})}return e.prototype.clear=function(){this.ctx.clearRect(0,0,this.centerX,this.centerY)},e.prototype.displayCardinal=function(e,t,i){var n=i&&i.width||this.square/15,a=i&&i.height||this.square/2,s=i&&i.color||"#ccc";this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(e*Math.PI/180),this.ctx.moveTo(t?n:-n,-n),this.ctx.lineTo(0,-a),this.ctx.lineTo(0,0),this.ctx.lineTo(t?n:-n,-n),this.ctx.fillStyle=s,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()},e.prototype.displayMark=function(e,t){void 0===t&&(t="#000"),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(e*Math.PI/180),this.ctx.moveTo(0,-this.square/2),this.ctx.lineTo(0,-this.square/2*.95),this.ctx.strokeStyle=t,this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()},e.prototype.displayWind=function(e,t,i,n){if(void 0===t&&(t=""),void 0===i&&(i=18),void 0===n&&(n="#1d528e"),null!=e){this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(e*Math.PI/180),this.ctx.moveTo(0,-this.square/5),this.ctx.lineTo(0,-this.square/2*.93),this.ctx.strokeStyle=n,this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore();var a=this.square/25;this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(this.centerX,this.centerY),this.ctx.rotate(e*Math.PI/180),this.ctx.moveTo(.5*a,-a-this.square/5),this.ctx.lineTo(0,-this.square/5),this.ctx.lineTo(.5*-a,-a-this.square/5),this.ctx.moveTo(.5*a,-a-this.square/5),this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}this.ctx.save(),this.ctx.translate(this.centerX,this.centerY),this.ctx.font=i+"px sans serif",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle=n,null!=e&&this.ctx.fillText(e.toFixed(0)+"°",0,i/1.8),this.ctx.fillText(""+t,0,-i/1.8),this.ctx.restore()},e}(),t=function(){function t(e,t){this.container=e,this.lang=t}return t.prototype.display=function(t){var i=this;return new Promise((function(n,a){var s={fr:{wind:"Vent",temp:"Temp",dew:"Rosée",pressure:"Pression",visibility:"Visibilité",error:"Erreur",raw:"Original"},en:{wind:"Wind",temp:"Temp",dew:"Dew",pressure:"Pressure",visibility:"Visibility",error:"error",raw:"Original"}};if(t.wind_speed){var r=jQuery('<canvas class="wind" width="100px" height="100px"></canvas>'),l=r.get(0);i.container.append(r),new e(l).displayWind(t.wind_direction.value,t.wind_speed.value+" "+t.units.wind_speed,15,"#ca2017")}if(t.temperature&&i.container.append('<div class="form-element"><label>'+s[i.lang].temp+':</label><span class="value">'+t.temperature.value+"<em>°"+t.units.temperature+"</em></span></div>"),t.dewpoint&&i.container.append('<div class="form-element"><label>'+s[i.lang].dew+':</label><span class="value">'+t.dewpoint.value+"<em>°"+t.units.temperature+"</em></span></div>"),t.altimeter&&i.container.append('<div class="form-element"><label>'+s[i.lang].pressure+':</label><span class="value">'+t.altimeter.value+"<em>"+t.units.altimeter+"</em></span></div>"),t.visibility){var o='<span class="value">'+t.visibility.value+"<em>"+t.units.visibility+"</em></span>";"CAVOK"==t.visibility.repr&&(o='<span class="value">'+{fr:"Nuages et visibilité sont OK,",en:"Ceiling and visibility OK"}[i.lang]+"</span>"),i.container.append('<div class="form-element"><label>'+s[i.lang].visibility+":</label>"+o+"</div>")}if(t.remarks){var c={fr:{NOSIG:"Aucun changement significatif dans les deux heures à venir",BECMG:"Changements prévus entre les heures indiquées",GRADU:"Changements prévus qui va arriver progressivement",RAPID:"Changements prévus rapidement (avant une demi-heure en moyenne)",TEMPO:"Fluctuations temporaires dans un bloc de 1 à 4 heures.",INTER:"Changements fréquents mais brefs",TEND:"Tendance"},en:{NOSIG:"No significant change",BECMG:"Becoming",GRADU:"Gradualy",RAPID:"Rapidly",TEMPO:"Temporary changes expected",INTER:"Intermittent",TEND:"Trend"}}[i.lang][t.remarks];c||(c=t.remarks),i.container.append('<div class="form-element"><label>Remarque:</label><span class="value">'+c+"</span></div>")}if(t.clouds&&t.clouds.length){var u={fr:{SKC:"aucun nuage [SKC]",FEW:"quelques nuages, 1/8 à 2/8 du ciel couvert [FEW]",SCT:"épars, 3/8 à 4/8 du ciel couvert [SCT]",BKN:"fragmenté, 5/8 à 7/8 du ciel couvert [BKN]",OVC:"couvert, 8/8 du ciel couvert [OVC]",NSC:"aucun nuage d'une hauteur inférieure à 5 000 pieds ou sous l'altitude minimale de secteur [NSC]"},en:{SKC:"sky [SKC]",FEW:"few, 1/8 - 2/8 [FEW]",SCT:"scattered, 3/8 - 4/8 [SCT]",BKN:"broken, 5/8 - 7/8 [BKN]",OVC:"overcast, 8/8 [OVC]",NSC:"No significant clouds [NSC]"}},d=t.clouds.map((function(e){return'<li class="cloud-item"><span class="cloud-altitude">Alt '+e.altitude+" "+t.units.altitude+":</span> "+u[i.lang][e.type]+"</li>"}));i.container.append('<div class="form-element"><label>Nuages:</label><ul class="value">'+d.join("\n")+"</ul></div>")}t.raw&&i.container.append('<div class="form-element"><label>'+s[i.lang].raw+':</label><span class="value">'+t.raw+"</span></div>"),n(t)}))},t}(),i=function(){function e(e,t){this.container=e,this.lang=t}return e.prototype.display=function(e){var i=this;return new Promise((function(n,a){var s={};if(!e.forecast.length)return n(e);var r=jQuery('<div class="switch-box source-selector"></div>');r.append('<label for="default" class="switch-box-label">MVFR</label>');var l=jQuery('<input id="default" class="switch-box-input" type="checkbox" />');r.append(l),r.append('<label for="default" class="switch-box-slider"></label>'),r.append('<label for="default" class="switch-box-label">IFR</label>'),i.container.append(r),l.on("change",(function(e){var t=jQuery(e.target).is(":checked")?"IFR":"MVFR";Object.keys(s).forEach((function(e){s[e].container.removeClass("visible")})),s[t]&&s[t].container&&s[t].container.addClass("visible")}));var o=jQuery('<div class="forecast"></div>');i.container.append(o),e.forecast.forEach((function(n){s[n.flight_rules]||(s[n.flight_rules]={container:jQuery('<div class="'+n.flight_rules+'"></div>'),timeline:jQuery('<div class="timeline"></div>'),data:{}},o.append(s[n.flight_rules].container),s[n.flight_rules].container.append(s[n.flight_rules].timeline)),s[n.flight_rules].data[n.end_time.dt]=n;var a=n;a.frame=jQuery('<div class="tab"></div>'),s[n.flight_rules].container.append(a.frame),a.units=e.units;var r=new Date(n.end_time.dt),l=jQuery('<button class="time-tab">'+r.getDate().leading(2)+"/"+r.getMonth()+" "+r.getHours().leading(2)+":"+r.getMinutes().leading(2)+"</button>");s[n.flight_rules].timeline.append(l),1==Object.keys(s[n.flight_rules].data).length&&(s[n.flight_rules].data[n.end_time.dt].frame.addClass("visible"),l.addClass("selected")),l.on("click",(function(e){s[n.flight_rules].timeline.children().each((function(e,t){jQuery(t).removeClass("selected")})),jQuery(e.target).addClass("selected"),s[n.flight_rules].container.find("div.tab").each((function(e,t){jQuery(t).removeClass("visible")})),s[n.flight_rules].data[n.end_time.dt].frame.addClass("visible")})),new t(a.frame,i.lang).display(a)})),s.MVFR.container.addClass("visible"),e.raw&&i.container.append('<div class="form-element"><label>Taf:</label><span class="value">'+e.raw+"</span></div>"),n(e)}))},e}();Number.prototype.leading=function(e,t){return void 0===t&&(t="0"),(Array(e).fill(t).join("")+this).substr(-e)};var n=function(){function e(e){this.dl=e,this.currentTab="metar",this.config=window.weatherConfig,this.currentLocation=this.config.locations[0]}return e.prototype.getLang=function(){return"fr"==this.config.lang?this.config.lang:"en"},e.prototype.tabShowOnly=function(e){jQuery("div.weather-widget-placeholder").children().each((function(t,i){jQuery(i).css("display","none"),jQuery("."+e).css("display","block")}))},e.prototype.addTab=function(e,t,i,n,a){var s=this;void 0===a&&(a=!1);var r=jQuery('<button class="'+(a?"selected":"")+'">'+t+"</button>");r.on("click",(function(t){i.children().each((function(e,t){jQuery(t).removeClass("selected")})),jQuery(t.currentTarget).addClass("selected"),s.tabShowOnly("weather-loading"),s.currentTab=e,s.loadWeather(e,s.currentLocation)})),i.append(r),n.append('<div class="tab-'+e+'"></div>')},e.prototype.loadWeather=function(e,t){var i=this;this.dl.load(this.config.url[e],e,t,this.getLang(),(function(t){t.station.toUpperCase(),i.tabShowOnly("tab-"+e),i.displayData(e,jQuery("div.tab-"+e),t)}))},e.prototype.displayData=function(e,n,a){var s,r=this,l=this.getLang();if(n.empty(),a.error){var o={fr:"Erreur",en:"Error"};return n.append('<div class="form-element"><label>'+o[l]+':</label><span class="value">'+a.error+"</span></div>"),new Promise((function(e,t){t(o[l])}))}switch(e){case"metar":s=new t(n,l).display(a);break;case"taf":s=new i(n,l).display(a);break;default:s=new Promise((function(t,i){i("no displayer for "+e)}))}return s.then((function(){r.appendTime(n,a)}))},e.prototype.appendTime=function(e,t){var i=this.getLang();if(t.time){var n=new Date(t.time.dt),a={fr:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aou","Sep","Oct","Nov","Dec"],en:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}[i][n.getMonth()-1],s=n.getHours().leading(2),r=n.getMinutes().leading(2);e.append('<span class="date"><span class="month">'+a+'</span><span class="day">'+n.getDate()+"</span></span>"),e.append('<span class="time">'+s+":"+r+"</span>")}},e.prototype.init=function(e){var t=this;if(0!=e.length&&this.config&&this.config.locations)if(this.config.locations.length){e.empty();var i=this.getLang();e.append('<h3 class="weather-title"></h3');var n=jQuery('<select class="weather-location-select"></select>');e.append(n),this.config.locations.forEach((function(e,t){var i=t?"":"selected";n.append('<option value="'+e.name+'" '+i+">"+e.name+" ("+e.label+")</option>")})),n.on("change",(function(e){var i=jQuery(e.target).children("option:selected").val(),n=t.config.locations.filter((function(e){return e.name==""+i}));1==n.length&&(t.currentLocation=n[0],t.tabShowOnly("weather-loading"),t.loadWeather(t.currentTab?t.currentTab:"metar",n[0]))}));var a=jQuery('<div class="tabs"></div>');e.append(a);var s=jQuery('<div class="weather-widget-placeholder"></div>');e.append(s),s.append('<img class="weather-loading" src="'+this.config.loadingImg+'">'),this.addTab("metar","Metar",a,s,!0),this.addTab("taf","Taf",a,s),e.append('<div class="disclaimer"><span class="dashicons dashicons-warning"></span>'+{fr:"Toutes les données présentées sur ce site sont non certifiées : elles doivent être systématiquement controlées à partir de données officielles",en:"All the data presented on this site are not certified: they must be systematically checked from official data"}[i]+"</div>"),this.config.locations&&0!=this.config.locations.length&&this.loadWeather("metar",this.config.locations[0])}else console.warn("[weather]","missing locations")},e}(),a=function(){function e(e,t){void 0===t&&(t=!1),this.policy=e,this.debug=t,this.cache={},this.timeoutHandler=null}return e.prototype.load=function(e,t,i,n,a){this.reloadAt(null,e,t,i,n,a)},e.prototype.loadData=function(e,t,i,n,a){var s=this,l=this.cacheName(t,i);return new Promise((function(a,o){var c=s.cache[l];if(s.debug&&c&&c.hasExpired()&&console.log("[CACHE] expired at",c.expireAt),c&&!c.hasExpired())return s.debug&&console.log("[CACHE]",l,c.data),a(c);jQuery.getJSON([e,i.name].join("/"),(function(){})).done((function(e){s.debug&&console.log("[GET]",l,e);var i=s.policy[t]?s.policy[t].nextExpiration(e):null;s.cache[l]=new r(e,i),a(s.cache[l])})).fail((function(){o("fr"==n?"Saperlipopette ! je n'arrive pas à récupérer les données.":"OMG ! I'm not able to retrieve data.")}))})).then((function(r){a(r.data);var l=r.expireAt;return((null==l?void 0:l.getTime())||0)>(new Date).getTime()&&(s.debug&&console.log("will reload",t,i.name,"at",(null==l?void 0:l.getHours())+":"+(null==l?void 0:l.getMinutes())),s.reloadAt(l,e,t,i,n,a)),r})).catch((function(e){return console.warn(e),a({error:e,station:i.name}),Promise.reject(e)}))},e.prototype.reloadAt=function(e,t,i,n,a,s){var r=this;if(null!=this.timeoutHandler&&(clearTimeout(this.timeoutHandler),this.timeoutHandler=null),null!=e){var l=e.getTime()-(new Date).getTime();if(l<=100)return this.reloadAt(null,t,i,n,a,s);this.timeoutHandler=setTimeout((function(){r.loadData(t,i,n,a,s)}),l)}else this.loadData(t,i,n,a,s)},e.prototype.cacheName=function(e,t){return e+"-"+t.name},e}(),s=function(){function e(e,t){this.frequencySecond=e,this.retrySecond=t}return e.prototype.nextExpiration=function(e){if(this.frequencySecond<=0)return null;var t=new Date(e.time.dt).getTime(),i=(new Date).getTime(),n=Math.floor(i/(1e3*this.frequencySecond))*this.frequencySecond*1e3,a=Math.ceil(i/(1e3*this.frequencySecond))*this.frequencySecond*1e3;return n==t?new Date(a):new Date(1e3*this.retrySecond+i)},e}(),r=function(){function e(e,t){this.data=e,this.expireAt=t}return e.prototype.hasExpired=function(){return null==this.expireAt||this.expireAt.getTime()<(new Date).getTime()+1e3},e}();jQuery((function(){new n(new a({taf:new s(10800,600),metar:new s(1800,120)},!0)).init(jQuery("div.weather-plugin"))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2FwcC93aW5kLnRzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvYXBwL21ldGFyLnRzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvYXBwL3RhZi50cyIsIndlYnBhY2s6Ly93ZWF0aGVyLy4vc3JjL2FwcC9jb250cm9sbGVyLnRzIiwid2VicGFjazovL3dlYXRoZXIvLi9zcmMvYXBwL2Rvd25sb2FkLW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vd2VhdGhlci8uL3NyYy9hcHAvaW5kZXgudHMiXSwibmFtZXMiOlsiZWx0IiwidGhpcyIsImN0eCIsImdldENvbnRleHQiLCJjZW50ZXJZIiwiaGVpZ2h0IiwiY2VudGVyWCIsIndpZHRoIiwic3F1YXJlIiwiY2xlYXIiLCJpIiwiZGlzcGxheU1hcmsiLCJkaXNwbGF5Q2FyZGluYWwiLCJjb2xvciIsImNsZWFyUmVjdCIsImFuZ2xlIiwibGVmdCIsIm9wdCIsInNhdmUiLCJiZWdpblBhdGgiLCJ0cmFuc2xhdGUiLCJyb3RhdGUiLCJNYXRoIiwiUEkiLCJtb3ZlVG8iLCJsaW5lVG8iLCJmaWxsU3R5bGUiLCJmaWxsIiwiY2xvc2VQYXRoIiwicmVzdG9yZSIsInN0cm9rZVN0eWxlIiwic3Ryb2tlIiwiZGlzcGxheVdpbmQiLCJmb3JjZSIsInNpemUiLCJhcnJvdyIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJ0ZXh0QmFzZWxpbmUiLCJmaWxsVGV4dCIsInRvRml4ZWQiLCJjb250YWluZXIiLCJsYW5nIiwiZGlzcGxheSIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInRpdGxlcyIsImZyIiwid2luZCIsInRlbXAiLCJkZXciLCJwcmVzc3VyZSIsInZpc2liaWxpdHkiLCJlcnJvciIsInJhdyIsImVuIiwid2luZF9zcGVlZCIsImNhbnZhcyIsImpRdWVyeSIsImdldCIsImFwcGVuZCIsIldpbmQiLCJ3aW5kX2RpcmVjdGlvbiIsInZhbHVlIiwidW5pdHMiLCJ0ZW1wZXJhdHVyZSIsImRld3BvaW50IiwiYWx0aW1ldGVyIiwidmlzIiwicmVwciIsInJlbWFya3MiLCJyZW1hcmsiLCJOT1NJRyIsIkJFQ01HIiwiR1JBRFUiLCJSQVBJRCIsIlRFTVBPIiwiSU5URVIiLCJURU5EIiwiY2xvdWRzIiwibGVuZ3RoIiwidHlwZXMiLCJTS0MiLCJGRVciLCJTQ1QiLCJCS04iLCJPVkMiLCJOU0MiLCJtYXAiLCJjbG91ZCIsImFsdGl0dWRlIiwidHlwZSIsImpvaW4iLCJmb3JlY2FzdCIsInN3aXRjaEJveCIsInN3aXRjaEJ0biIsIm9uIiwiZXZlbnQiLCJmbGlnaHRSdWxlIiwidGFyZ2V0IiwiaXMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsIm5hbWUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZm9yZWNhc3RDb250YWluZXIiLCJmbGlnaHRfcnVsZXMiLCJ0aW1lbGluZSIsImVuZF90aW1lIiwiZHQiLCJtZXRhckxpa2UiLCJmcmFtZSIsInQiLCJEYXRlIiwiYnRuIiwiZ2V0RGF0ZSIsImxlYWRpbmciLCJnZXRNb250aCIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImNoaWxkcmVuIiwiZWFjaCIsImluZGV4IiwiZWxlbWVudCIsImZpbmQiLCJNZXRhciIsIk1WRlIiLCJOdW1iZXIiLCJwcm90b3R5cGUiLCJBcnJheSIsInN1YnN0ciIsImRsIiwiY3VycmVudFRhYiIsImNvbmZpZyIsIndpbmRvdyIsIndlYXRoZXJDb25maWciLCJjdXJyZW50TG9jYXRpb24iLCJsb2NhdGlvbnMiLCJnZXRMYW5nIiwidGFiU2hvd09ubHkiLCJjbGFzc05hbWUiLCJjc3MiLCJhZGRUYWIiLCJsYWJlbCIsInRhYnMiLCJhY3RpdmUiLCJidXR0b24iLCJjdXJyZW50VGFyZ2V0IiwibG9hZFdlYXRoZXIiLCJ0YWJOYW1lIiwibG9jYXRpb24iLCJsb2FkIiwidXJsIiwiZCIsInN0YXRpb24iLCJ0b1VwcGVyQ2FzZSIsImRpc3BsYXlEYXRhIiwicmV0IiwiZW1wdHkiLCJUYWYiLCJ0aGVuIiwiYXBwZW5kVGltZSIsInRpbWUiLCJjdXJyZW50RGF0ZSIsIm1vbnRoIiwiaG91ciIsIm1pbnV0ZSIsImluaXQiLCJtYWluQ29udGFpbmVyIiwic2VsZWN0aW9uIiwic2VsZWN0ZWQiLCJ2YWwiLCJsb2NzIiwiZmlsdGVyIiwibG9hZGluZ0ltZyIsImNvbnNvbGUiLCJ3YXJuIiwicG9saWN5IiwiZGVidWciLCJjYWNoZSIsInRpbWVvdXRIYW5kbGVyIiwicm91dGUiLCJyZWxvYWRBdCIsImxvYWREYXRhIiwiY2FjaGVOYW1lIiwiaGFzRXhwaXJlZCIsImxvZyIsImV4cGlyZUF0IiwiZ2V0SlNPTiIsImRvbmUiLCJuZXh0RXhwaXJhdGlvbiIsIkNhY2hlIiwiZmFpbCIsImNhY2hlRXhwaXJlQXQiLCJnZXRUaW1lIiwiY2F0Y2giLCJlcnIiLCJ3aGVuIiwiY2xlYXJUaW1lb3V0IiwiZGVsYXkiLCJzZXRUaW1lb3V0IiwiZnJlcXVlbmN5U2Vjb25kIiwicmV0cnlTZWNvbmQiLCJkYXRhVHMiLCJub3dUcyIsImRhdGFUc1Nob3VsZEJlIiwiZmxvb3IiLCJ0aWNrQWZ0ZXJEYXRhVHMiLCJjZWlsIiwiQ29udHJvbGxlciIsIkRvd25sb2FkTWFuYWdlciIsInRhZiIsIkRvd25sb2FkUG9saWN5IiwibWV0YXIiXSwibWFwcGluZ3MiOiJtQkFRQSxpQkFNSSxXQUFZQSxHQUNSQyxLQUFLQyxJQUFNRixFQUFJRyxXQUFXLE1BRTFCRixLQUFLRyxRQUFVSixFQUFJSyxPQUFTLEVBQzVCSixLQUFLSyxRQUFVTixFQUFJTyxNQUFRLEVBQzNCTixLQUFLTyxPQUFxRSxHQUEzRFAsS0FBS0csUUFBUUgsS0FBS0ssUUFBVUwsS0FBS0ssUUFBVUwsS0FBS0csU0FFL0RILEtBQUtRLFFBRUwsSUFBSSxJQUFJQyxFQUFFLEVBQUdBLEVBQUUsSUFBS0EsR0FBRyxHQUNuQlQsS0FBS1UsWUFBWUQsRUFBRyxRQUl4QixJQUFRQSxFQUFFLEdBQUlBLEVBQUUsSUFBS0EsR0FBRyxHQUNwQlQsS0FBS1csZ0JBQWdCRixHQUFH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c2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbnRlcmZhY2UgQ2FyZGluYWxPcHRpb24ge1xuICAgIGNvbG9yPzogc3RyaW5nXG4gICAgd2lkdGg/OiBudW1iZXJcbiAgICBoZWlnaHQ/OiBudW1iZXJcbn1cblxuXG5leHBvcnQgY2xhc3MgV2luZCB7XG4gICAgcHJpdmF0ZSBjdHg6IGFueTtcbiAgICBwcml2YXRlIGNlbnRlclg6IG51bWJlcjtcbiAgICBwcml2YXRlIGNlbnRlclk6IG51bWJlcjtcbiAgICBwcml2YXRlIHNxdWFyZTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoZWx0OiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICB0aGlzLmN0eCA9IGVsdC5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICAgICAgdGhpcy5jZW50ZXJZID0gZWx0LmhlaWdodCAvIDI7XG4gICAgICAgIHRoaXMuY2VudGVyWCA9IGVsdC53aWR0aCAvIDI7XG4gICAgICAgIHRoaXMuc3F1YXJlID0gKHRoaXMuY2VudGVyWT50aGlzLmNlbnRlclggPyB0aGlzLmNlbnRlclggOiB0aGlzLmNlbnRlclkpICogMjtcblxuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgZm9yKHZhciBpPTA7IGk8MzYwOyBpKz0xMCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWFyayhpLCBcIiM4ODhcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWNvbmRhcnkgY2FyZGluYWxcbiAgICAgICAgZm9yKHZhciBpPTQ1OyBpPDM2MDsgaSs9OTApIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUNhcmRpbmFsKGksIGZhbHNlLCB7Y29sb3I6IFwiI2NlY2VjZVwifSk7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlDYXJkaW5hbChpLCB0cnVlLCB7Y29sb3I6IFwiI2RmZGZkZlwifSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmltYXJ5IGNhcmRpbmFsXG4gICAgICAgIGZvcih2YXIgaT0wOyBpPDM2MDsgaSs9OTApIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUNhcmRpbmFsKGksIGZhbHNlLCB7Y29sb3I6IFwiI2NjY1wifSk7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlDYXJkaW5hbChpLCB0cnVlLCB7Y29sb3I6IFwiI2RkZFwifSk7XG4gICAgICAgIH1cbiAgICBcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsZWFyKCkge1xuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jZW50ZXJYLCB0aGlzLmNlbnRlclkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGlzcGxheUNhcmRpbmFsKGFuZ2xlOiBudW1iZXIsIGxlZnQ6IGJvb2xlYW4sIG9wdD86IENhcmRpbmFsT3B0aW9uKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gb3B0ID8gb3B0LndpZHRoIHx8IHRoaXMuc3F1YXJlLzE1IDogdGhpcy5zcXVhcmUvMTU7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IG9wdCA/IG9wdC5oZWlnaHQgfHwgdGhpcy5zcXVhcmUvMiA6IHRoaXMuc3F1YXJlLzI7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gb3B0ID8gb3B0LmNvbG9yIHx8IFwiI2NjY1wiIDogXCIjY2NjXCI7XG4gICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZSh0aGlzLmNlbnRlclgsIHRoaXMuY2VudGVyWSk7XG4gICAgICAgIHRoaXMuY3R4LnJvdGF0ZShhbmdsZSAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8obGVmdCA/IHdpZHRoIDogLXdpZHRoLCAtd2lkdGgsICk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbygwLCAtaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKDAsIDApO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8obGVmdCA/IHdpZHRoIDogLXdpZHRoLCAtd2lkdGgsICk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkaXNwbGF5TWFyayhhbmdsZTogbnVtYmVyLCBjb2xvcj1cIiMwMDBcIikge1xuICAgICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC50cmFuc2xhdGUodGhpcy5jZW50ZXJYLCB0aGlzLmNlbnRlclkpO1xuICAgICAgICB0aGlzLmN0eC5yb3RhdGUoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKTtcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKDAsIC10aGlzLnNxdWFyZS8yKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKDAsIC0odGhpcy5zcXVhcmUvMikqMC45NSk7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlPWNvbG9yO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGRpc3BsYXlXaW5kKGFuZ2xlOiBudW1iZXIsIGZvcmNlID0gXCJcIiwgc2l6ZT0xOCwgY29sb3I9XCIjMWQ1MjhlXCIpIHtcbiAgICAgICAgaWYgKGFuZ2xlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKHRoaXMuY2VudGVyWCwgdGhpcy5jZW50ZXJZKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnJvdGF0ZShhbmdsZSAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKDAsIC10aGlzLnNxdWFyZS81KTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbygwLCAtKHRoaXMuc3F1YXJlLzIpKjAuOTMpO1xuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYXJyb3cgPSB0aGlzLnNxdWFyZS8yNTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJwZW4gPSAwLjU7XG4gICAgICAgICAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZSh0aGlzLmNlbnRlclgsIHRoaXMuY2VudGVyWSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5yb3RhdGUoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKTtcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhhcnJvdyAqIHNoYXJwZW4sIC1hcnJvdyAtdGhpcy5zcXVhcmUvNSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oMCwgLXRoaXMuc3F1YXJlLzUpO1xuICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKC1hcnJvdyAqIHNoYXJwZW4sIC1hcnJvdyAtdGhpcy5zcXVhcmUvNSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oYXJyb3cgKiBzaGFycGVuLCAtYXJyb3cgLXRoaXMuc3F1YXJlLzUpO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKHRoaXMuY2VudGVyWCwgdGhpcy5jZW50ZXJZKTtcbiAgICAgICAgdGhpcy5jdHguZm9udCA9IGAke3NpemV9cHggc2FucyBzZXJpZmA7XG4gICAgICAgIHRoaXMuY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICB0aGlzLmN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgIGlmIChhbmdsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsVGV4dChgJHthbmdsZS50b0ZpeGVkKDApfcKwYCwgMCwgc2l6ZS8xLjgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KGAke2ZvcmNlfWAsIDAsIC1zaXplLzEuOCk7XG4gICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge01ldGFyRGF0YX0gZnJvbSAnLi93ZWF0aGVyJztcbmltcG9ydCB7IFdpbmQgfSBmcm9tICcuL3dpbmQnO1xuXG5leHBvcnQgY2xhc3MgTWV0YXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbnRhaW5lcjogSlF1ZXJ5LFxuICAgICAgICBwcml2YXRlIGxhbmc6IHN0cmluZyxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZGlzcGxheShkYXRhOiBNZXRhckRhdGEpOiBQcm9taXNlPE1ldGFyRGF0YT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGl0bGVzOiB7W2xhbmc6IHN0cmluZ106IHtba2V5OiBzdHJpbmddOiBzdHJpbmd9fSA9IHtcbiAgICAgICAgICAgICAgZnI6IHtcbiAgICAgICAgICAgICAgICB3aW5kOiAnVmVudCcsXG4gICAgICAgICAgICAgICAgdGVtcDogJ1RlbXAnLFxuICAgICAgICAgICAgICAgIGRldzogJ1Jvc8OpZScsXG4gICAgICAgICAgICAgICAgcHJlc3N1cmU6ICdQcmVzc2lvbicsXG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ1Zpc2liaWxpdMOpJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0VycmV1cicsXG4gICAgICAgICAgICAgICAgcmF3OiAnT3JpZ2luYWwnLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlbjoge1xuICAgICAgICAgICAgICAgIHdpbmQ6ICdXaW5kJyxcbiAgICAgICAgICAgICAgICB0ZW1wOiAnVGVtcCcsXG4gICAgICAgICAgICAgICAgZGV3OiAnRGV3JyxcbiAgICAgICAgICAgICAgICBwcmVzc3VyZTogJ1ByZXNzdXJlJyxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAnVmlzaWJpbGl0eScsXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgcmF3OiAnT3JpZ2luYWwnLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgICAvLyBXaW5kXG4gICAgICAgICAgICBpZiAoZGF0YS53aW5kX3NwZWVkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGpRdWVyeSgnPGNhbnZhcyBjbGFzcz1cIndpbmRcIiB3aWR0aD1cIjEwMHB4XCIgaGVpZ2h0PVwiMTAwcHhcIj48L2NhbnZhcz4nKTtcbiAgICAgICAgICAgICAgY29uc3QgZWx0ID0gY2FudmFzLmdldCgwKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGNhbnZhcyk7XG4gICAgICAgICAgICAgIG5ldyBXaW5kKGVsdCkuZGlzcGxheVdpbmQoXG4gICAgICAgICAgICAgICAgZGF0YS53aW5kX2RpcmVjdGlvbi52YWx1ZSwgXG4gICAgICAgICAgICAgICAgYCR7ZGF0YS53aW5kX3NwZWVkLnZhbHVlfSAke2RhdGEudW5pdHMud2luZF9zcGVlZH1gLFxuICAgICAgICAgICAgICAgIDE1LFxuICAgICAgICAgICAgICAgICcjY2EyMDE3J1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGVtcGVyYXR1cmVzXG4gICAgICAgICAgICBpZiAoZGF0YS50ZW1wZXJhdHVyZSkge1xuICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmb3JtLWVsZW1lbnRcIj48bGFiZWw+Jyt0aXRsZXNbdGhpcy5sYW5nXS50ZW1wKyc6PC9sYWJlbD48c3BhbiBjbGFzcz1cInZhbHVlXCI+JysgZGF0YS50ZW1wZXJhdHVyZS52YWx1ZSArJzxlbT7CsCcrIGRhdGEudW5pdHMudGVtcGVyYXR1cmUrJzwvZW0+PC9zcGFuPjwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuZGV3cG9pbnQpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZm9ybS1lbGVtZW50XCI+PGxhYmVsPicrdGl0bGVzW3RoaXMubGFuZ10uZGV3Kyc6PC9sYWJlbD48c3BhbiBjbGFzcz1cInZhbHVlXCI+JysgZGF0YS5kZXdwb2ludC52YWx1ZSArJzxlbT7CsCcrIGRhdGEudW5pdHMudGVtcGVyYXR1cmUrJzwvZW0+PC9zcGFuPjwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJlc3N1cmVcbiAgICAgICAgICAgIGlmIChkYXRhLmFsdGltZXRlcikge1xuICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmb3JtLWVsZW1lbnRcIj48bGFiZWw+Jyt0aXRsZXNbdGhpcy5sYW5nXS5wcmVzc3VyZSsnOjwvbGFiZWw+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPicrIGRhdGEuYWx0aW1ldGVyLnZhbHVlICsgJzxlbT4nICsgZGF0YS51bml0cy5hbHRpbWV0ZXIgKyc8L2VtPjwvc3Bhbj48L2Rpdj4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmlzaWJpbGl0eVxuICAgICAgICAgICAgaWYgKGRhdGEudmlzaWJpbGl0eSkge1xuICAgICAgICAgICAgICB2YXIgdmlzID0gJzxzcGFuIGNsYXNzPVwidmFsdWVcIj4nKyBkYXRhLnZpc2liaWxpdHkudmFsdWUgKyc8ZW0+JysgZGF0YS51bml0cy52aXNpYmlsaXR5Kyc8L2VtPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICBpZiAoZGF0YS52aXNpYmlsaXR5LnJlcHIgPT0gXCJDQVZPS1wiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhdm9rOiB7W2xhbmc6IHN0cmluZ106IHN0cmluZ30gPSB7XG4gICAgICAgICAgICAgICAgICBmcjogJ051YWdlcyBldCB2aXNpYmlsaXTDqSBzb250IE9LLCcsXG4gICAgICAgICAgICAgICAgICBlbjogJ0NlaWxpbmcgYW5kIHZpc2liaWxpdHkgT0snLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aXMgPSAnPHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPicgKyBjYXZva1t0aGlzLmxhbmddICsgJzwvc3Bhbj4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZvcm0tZWxlbWVudFwiPjxsYWJlbD4nK3RpdGxlc1t0aGlzLmxhbmddLnZpc2liaWxpdHkrJzo8L2xhYmVsPicgKyB2aXMgKyAnPC9kaXY+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW1hcmtzXG4gICAgICAgICAgICBpZiAoZGF0YS5yZW1hcmtzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlbWFya3M6IHtbbGFuZzogc3RyaW5nXToge1trZXk6IHN0cmluZ106IHN0cmluZ319ID0ge1xuICAgICAgICAgICAgICAgIGZyOntcbiAgICAgICAgICAgICAgICAgIE5PU0lHIDogJ0F1Y3VuIGNoYW5nZW1lbnQgc2lnbmlmaWNhdGlmIGRhbnMgbGVzIGRldXggaGV1cmVzIMOgIHZlbmlyJyxcbiAgICAgICAgICAgICAgICAgIEJFQ01HIDogJ0NoYW5nZW1lbnRzIHByw6l2dXMgZW50cmUgbGVzIGhldXJlcyBpbmRpcXXDqWVzJyxcbiAgICAgICAgICAgICAgICAgIEdSQURVIDogJ0NoYW5nZW1lbnRzIHByw6l2dXMgcXVpIHZhIGFycml2ZXIgcHJvZ3Jlc3NpdmVtZW50JyxcbiAgICAgICAgICAgICAgICAgIFJBUElEIDogJ0NoYW5nZW1lbnRzIHByw6l2dXMgcmFwaWRlbWVudCAoYXZhbnQgdW5lIGRlbWktaGV1cmUgZW4gbW95ZW5uZSknLFxuICAgICAgICAgICAgICAgICAgVEVNUE8gOiAnRmx1Y3R1YXRpb25zIHRlbXBvcmFpcmVzIGRhbnMgdW4gYmxvYyBkZSAxIMOgIDQgaGV1cmVzLicsXG4gICAgICAgICAgICAgICAgICBJTlRFUiA6ICdDaGFuZ2VtZW50cyBmcsOpcXVlbnRzIG1haXMgYnJlZnMnLFxuICAgICAgICAgICAgICAgICAgVEVORCAgOiAnVGVuZGFuY2UnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW46IHtcbiAgICAgICAgICAgICAgICAgIE5PU0lHIDogJ05vIHNpZ25pZmljYW50IGNoYW5nZScsXG4gICAgICAgICAgICAgICAgICBCRUNNRyA6ICdCZWNvbWluZycsXG4gICAgICAgICAgICAgICAgICBHUkFEVSA6ICdHcmFkdWFseScsXG4gICAgICAgICAgICAgICAgICBSQVBJRCA6ICdSYXBpZGx5JyxcbiAgICAgICAgICAgICAgICAgIFRFTVBPIDogJ1RlbXBvcmFyeSBjaGFuZ2VzIGV4cGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgIElOVEVSIDogJ0ludGVybWl0dGVudCcsXG4gICAgICAgICAgICAgICAgICBURU5EICA6ICdUcmVuZCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgdmFyIHJlbWFyayA9IHJlbWFya3NbdGhpcy5sYW5nXVtkYXRhLnJlbWFya3NdXG4gICAgICAgICAgICAgIGlmICghcmVtYXJrKSB7XG4gICAgICAgICAgICAgICAgcmVtYXJrID0gZGF0YS5yZW1hcmtzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZvcm0tZWxlbWVudFwiPjxsYWJlbD5SZW1hcnF1ZTo8L2xhYmVsPjxzcGFuIGNsYXNzPVwidmFsdWVcIj4nKyByZW1hcmsgKyc8L3NwYW4+PC9kaXY+JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsb3Vkc1xuICAgICAgICAgICAgaWYgKGRhdGEuY2xvdWRzICYmIGRhdGEuY2xvdWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICB2YXIgdHlwZXM6IHtbbGFuZzogc3RyaW5nXToge1trZXk6IHN0cmluZ106IHN0cmluZ319ID0ge1xuICAgICAgICAgICAgICAgIGZyOntcbiAgICAgICAgICAgICAgICAgIFNLQyA6ICdhdWN1biBudWFnZSBbU0tDXScsXG4gICAgICAgICAgICAgICAgICBGRVcgOiAncXVlbHF1ZXMgbnVhZ2VzLCAxLzggw6AgMi84IGR1IGNpZWwgY291dmVydCBbRkVXXScsXG4gICAgICAgICAgICAgICAgICBTQ1QgOiAnw6lwYXJzLCAzLzggw6AgNC84IGR1IGNpZWwgY291dmVydCBbU0NUXScsXG4gICAgICAgICAgICAgICAgICBCS04gOiAnZnJhZ21lbnTDqSwgNS84IMOgIDcvOCBkdSBjaWVsIGNvdXZlcnQgW0JLTl0nLFxuICAgICAgICAgICAgICAgICAgT1ZDIDogJ2NvdXZlcnQsIDgvOCBkdSBjaWVsIGNvdXZlcnQgW09WQ10nLFxuICAgICAgICAgICAgICAgICAgTlNDIDogJ2F1Y3VuIG51YWdlIGRcXCd1bmUgaGF1dGV1ciBpbmbDqXJpZXVyZSDDoCA1IDAwMCBwaWVkcyBvdSBzb3VzIGxcXCdhbHRpdHVkZSBtaW5pbWFsZSBkZSBzZWN0ZXVyIFtOU0NdJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVuOntcbiAgICAgICAgICAgICAgICAgIFNLQyA6ICdza3kgW1NLQ10nLFxuICAgICAgICAgICAgICAgICAgRkVXIDogJ2ZldywgMS84IC0gMi84IFtGRVddJyxcbiAgICAgICAgICAgICAgICAgIFNDVCA6ICdzY2F0dGVyZWQsIDMvOCAtIDQvOCBbU0NUXScsXG4gICAgICAgICAgICAgICAgICBCS04gOiAnYnJva2VuLCA1LzggLSA3LzggW0JLTl0nLFxuICAgICAgICAgICAgICAgICAgT1ZDIDogJ292ZXJjYXN0LCA4LzggW09WQ10nLFxuICAgICAgICAgICAgICAgICAgTlNDIDogJ05vIHNpZ25pZmljYW50IGNsb3VkcyBbTlNDXScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgY2xvdWRzID0gZGF0YS5jbG91ZHMubWFwKChjbG91ZCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAnPGxpIGNsYXNzPVwiY2xvdWQtaXRlbVwiPjxzcGFuIGNsYXNzPVwiY2xvdWQtYWx0aXR1ZGVcIj5BbHQgJysgY2xvdWQuYWx0aXR1ZGUgKyAnICcgKyBkYXRhLnVuaXRzLmFsdGl0dWRlICsgJzo8L3NwYW4+ICcgKyB0eXBlc1t0aGlzLmxhbmddW2Nsb3VkLnR5cGVdICsgJzwvbGk+J1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmb3JtLWVsZW1lbnRcIj48bGFiZWw+TnVhZ2VzOjwvbGFiZWw+PHVsIGNsYXNzPVwidmFsdWVcIj4nKyBjbG91ZHMuam9pbihcIlxcblwiKSArJzwvdWw+PC9kaXY+JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJhdyBNZXRhclxuICAgICAgICAgICAgaWYgKGRhdGEucmF3KSB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImZvcm0tZWxlbWVudFwiPjxsYWJlbD4nICsgdGl0bGVzW3RoaXMubGFuZ10ucmF3ICsgJzo8L2xhYmVsPjxzcGFuIGNsYXNzPVwidmFsdWVcIj4nKyBkYXRhLnJhdyArJzwvc3Bhbj48L2Rpdj4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCB7TWV0YXJEYXRhLCBUYWZEYXRhfSBmcm9tICcuL3dlYXRoZXInO1xuaW1wb3J0IHtGb3JlY2FzdH0gZnJvbSAnLi93ZWF0aGVyJzsgXG5pbXBvcnQge01ldGFyfSBmcm9tICcuL21ldGFyJztcblxuZXhwb3J0IGNsYXNzIFRhZiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29udGFpbmVyOiBKUXVlcnksXG4gICAgICAgIHByaXZhdGUgbGFuZzogc3RyaW5nLFxuICAgICkge31cblxuICAgIHB1YmxpYyBkaXNwbGF5KGRhdGE6IFRhZkRhdGEpOiBQcm9taXNlPFRhZkRhdGE+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZhciBmb3JlY2FzdDoge1tuYW1lOiBzdHJpbmddOiB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBKUXVlcnlcbiAgICAgICAgICAgICAgICB0aW1lbGluZTogSlF1ZXJ5XG4gICAgICAgICAgICAgICAgZGF0YTogYW55XG4gICAgICAgICAgICB9fSA9IHt9O1xuICAgICAgXG4gICAgICAgICAgICBpZiAoIWRhdGEuZm9yZWNhc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGbGlnaHQgcnVsZXMgc3dpdGNoXG4gICAgICAgICAgICBjb25zdCBzd2l0Y2hCb3ggPSBqUXVlcnkoJzxkaXYgY2xhc3M9XCJzd2l0Y2gtYm94IHNvdXJjZS1zZWxlY3RvclwiPjwvZGl2PicpO1xuICAgICAgICAgICAgc3dpdGNoQm94LmFwcGVuZCgnPGxhYmVsIGZvcj1cImRlZmF1bHRcIiBjbGFzcz1cInN3aXRjaC1ib3gtbGFiZWxcIj5NVkZSPC9sYWJlbD4nKTtcbiAgICAgICAgICAgIGNvbnN0IHN3aXRjaEJ0biA9IGpRdWVyeSgnPGlucHV0IGlkPVwiZGVmYXVsdFwiIGNsYXNzPVwic3dpdGNoLWJveC1pbnB1dFwiIHR5cGU9XCJjaGVja2JveFwiIC8+Jyk7XG4gICAgICAgICAgICBzd2l0Y2hCb3guYXBwZW5kKHN3aXRjaEJ0bik7XG4gICAgICAgICAgICBzd2l0Y2hCb3guYXBwZW5kKCc8bGFiZWwgZm9yPVwiZGVmYXVsdFwiIGNsYXNzPVwic3dpdGNoLWJveC1zbGlkZXJcIj48L2xhYmVsPicpO1xuICAgICAgICAgICAgc3dpdGNoQm94LmFwcGVuZCgnPGxhYmVsIGZvcj1cImRlZmF1bHRcIiBjbGFzcz1cInN3aXRjaC1ib3gtbGFiZWxcIj5JRlI8L2xhYmVsPicpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHN3aXRjaEJveCk7XG4gICAgICBcbiAgICAgICAgICAgIHN3aXRjaEJ0bi5vbignY2hhbmdlJywgKGV2ZW50OiBKUXVlcnkuQ2hhbmdlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgdmFyIGZsaWdodFJ1bGUgPSAoalF1ZXJ5KGV2ZW50LnRhcmdldCkuaXMoXCI6Y2hlY2tlZFwiKSkgPyAnSUZSJzonTVZGUic7XG4gICAgICBcbiAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZm9yZWNhc3QpLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBmb3JlY2FzdFtuYW1lXS5jb250YWluZXIucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgICAgICAgaWYgKGZvcmVjYXN0W2ZsaWdodFJ1bGVdICYmZm9yZWNhc3RbZmxpZ2h0UnVsZV0uY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgZm9yZWNhc3RbZmxpZ2h0UnVsZV0uY29udGFpbmVyLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgXG4gICAgICBcbiAgICAgICAgICAgIHZhciBmb3JlY2FzdENvbnRhaW5lciA9IGpRdWVyeSgnPGRpdiBjbGFzcz1cImZvcmVjYXN0XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoZm9yZWNhc3RDb250YWluZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkYXRhLmZvcmVjYXN0LmZvckVhY2goKGVsdDogRm9yZWNhc3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWZvcmVjYXN0W2VsdC5mbGlnaHRfcnVsZXNdKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmVjYXN0W2VsdC5mbGlnaHRfcnVsZXNdID0ge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGpRdWVyeSgnPGRpdiBjbGFzcz1cIicgKyBlbHQuZmxpZ2h0X3J1bGVzICsgJ1wiPjwvZGl2PicpLFxuICAgICAgICAgICAgICAgICAgICB0aW1lbGluZTogalF1ZXJ5KCc8ZGl2IGNsYXNzPVwidGltZWxpbmVcIj48L2Rpdj4nKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGZvcmVjYXN0Q29udGFpbmVyLmFwcGVuZChmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS5jb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICBmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS5jb250YWluZXIuYXBwZW5kKGZvcmVjYXN0W2VsdC5mbGlnaHRfcnVsZXNdLnRpbWVsaW5lKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS5kYXRhW2VsdC5lbmRfdGltZS5kdF0gPSBlbHQ7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFyTGlrZSA9ICBlbHQgYXMgYW55O1xuICAgICAgICAgICAgICAgIG1ldGFyTGlrZS5mcmFtZSA9IGpRdWVyeSgnPGRpdiBjbGFzcz1cInRhYlwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS5jb250YWluZXIuYXBwZW5kKG1ldGFyTGlrZS5mcmFtZSk7XG4gICAgICAgICAgICAgICAgbWV0YXJMaWtlLnVuaXRzID0gZGF0YS51bml0cztcbiAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRGF0ZShlbHQuZW5kX3RpbWUuZHQpO1xuICAgICAgICAgICAgICAgIHZhciBidG4gPSBqUXVlcnkoJzxidXR0b24gY2xhc3M9XCJ0aW1lLXRhYlwiPicgKyB0LmdldERhdGUoKS5sZWFkaW5nKDIpICsgJy8nICsgdC5nZXRNb250aCgpICsgJyAnICsgdC5nZXRIb3VycygpLmxlYWRpbmcoMikgKyAnOicgKyB0LmdldE1pbnV0ZXMoKS5sZWFkaW5nKDIpICsgJzwvYnV0dG9uPicpO1xuICAgICAgICAgICAgICAgIGZvcmVjYXN0W2VsdC5mbGlnaHRfcnVsZXNdLnRpbWVsaW5lLmFwcGVuZChidG4pO1xuICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGZvcmVjYXN0W2VsdC5mbGlnaHRfcnVsZXNdLmRhdGEpLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmVjYXN0W2VsdC5mbGlnaHRfcnVsZXNdLmRhdGFbZWx0LmVuZF90aW1lLmR0XS5mcmFtZS5hZGRDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICBidG4uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgYnRuLm9uKCdjbGljaycsIChldmVudDogSlF1ZXJ5LkNsaWNrRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yZWNhc3RbZWx0LmZsaWdodF9ydWxlc10udGltZWxpbmUuY2hpbGRyZW4oKS5lYWNoKChpbmRleDogbnVtYmVyLCBlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KGVsZW1lbnQpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KGV2ZW50LnRhcmdldCkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS5jb250YWluZXIuZmluZCgnZGl2LnRhYicpLmVhY2goKGluZGV4OiBudW1iZXIsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3JlY2FzdFtlbHQuZmxpZ2h0X3J1bGVzXS5kYXRhW2VsdC5lbmRfdGltZS5kdF0uZnJhbWUuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IE1ldGFyKG1ldGFyTGlrZS5mcmFtZSwgdGhpcy5sYW5nKS5kaXNwbGF5KG1ldGFyTGlrZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgICAgICAgZm9yZWNhc3QuTVZGUi5jb250YWluZXIuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJhdyBUYWZcbiAgICAgICAgICAgIGlmIChkYXRhLnJhdykge1xuICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmb3JtLWVsZW1lbnRcIj48bGFiZWw+VGFmOjwvbGFiZWw+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPicrIGRhdGEucmF3ICsnPC9zcGFuPjwvZGl2PicpO1xuICAgICAgICAgICAgfVxuICAgICAgXG4gICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQge0NvbmZpZywgTG9jYXRpb24sIE1ldGFyRGF0YSwgVGFmRGF0YSwgTWV0YURhdGEsIFdlYXRoZXJEYXRhfSBmcm9tICcuL3dlYXRoZXInO1xuaW1wb3J0IHtNZXRhcn0gZnJvbSAnLi9tZXRhcic7XG5pbXBvcnQge1RhZn0gZnJvbSAnLi90YWYnO1xuaW1wb3J0IHtEb3dubG9hZE1hbmFnZXJ9IGZyb20gJy4vZG93bmxvYWQtbWFuYWdlcic7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgICBpbnRlcmZhY2UgTnVtYmVyIHtcbiAgICAgICAgbGVhZGluZzogKHNpemU6IG51bWJlciwgbGVhZGluZz86IHN0cmluZykgPT4gc3RyaW5nO1xuICAgIH1cbn1cblxuTnVtYmVyLnByb3RvdHlwZS5sZWFkaW5nID0gZnVuY3Rpb24oc2l6ZTogbnVtYmVyLCBsZWFkaW5nID0gJzAnKSA6IHN0cmluZyB7XG4gICAgcmV0dXJuIChBcnJheShzaXplKS5maWxsKGxlYWRpbmcpLmpvaW4oJycpICsgdGhpcykuc3Vic3RyKC1zaXplKTtcbn1cblxuXG5leHBvcnQgY2xhc3MgQ29udHJvbGxlciB7XG5cbiAgICBwcml2YXRlIGNvbmZpZzogQ29uZmlnO1xuICAgIHByaXZhdGUgY3VycmVudFRhYiA9ICdtZXRhcic7XG4gICAgcHJpdmF0ZSBjdXJyZW50TG9jYXRpb246IExvY2F0aW9uO1xuXG5cbiAgICBjb25zdHJ1Y3RvciAocHJpdmF0ZSBkbDogRG93bmxvYWRNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gKHdpbmRvdyBhcyBhbnkpLndlYXRoZXJDb25maWcgYXMgQ29uZmlnO1xuICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IHRoaXMuY29uZmlnLmxvY2F0aW9uc1swXTtcbiAgICB9XG5cbiAgICAvLyBnZXRMYW5nIHByb3ZpZGVzIHRoZSBsYW5ndWFnZVxuICAgIGdldExhbmcgKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5sYW5nID09ICdmcicgPyB0aGlzLmNvbmZpZy5sYW5nIDogJ2VuJztcbiAgICB9O1xuXG4gICAgLy8gdGFiU2hvd09ubHkgaGlkZXMgYWxsIHRhYnMgYW5kIHNob3cgb25seSB0aGUgc3BlY2lmaWVkcyBvbmVcbiAgICB0YWJTaG93T25seShjbGFzc05hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBqUXVlcnkoJ2Rpdi53ZWF0aGVyLXdpZGdldC1wbGFjZWhvbGRlcicpLmNoaWxkcmVuKCkuZWFjaCgoaW5kZXg6IG51bWJlciwgZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGpRdWVyeShlbGVtZW50KS5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpO1xuICAgICAgICAgICAgalF1ZXJ5KCcuJyArIGNsYXNzTmFtZSkuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIik7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gYWRkVGFiIGFkZHMgYSBuZXcgdGFiIGluIHRoZSBtYWluIGNvbnRhaW5lclxuICAgIGFkZFRhYihuYW1lOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcsIHRhYnM6IEpRdWVyeSwgY29udGFpbmVyOiBKUXVlcnksIGFjdGl2ZT1mYWxzZSkge1xuICAgICAgICBjb25zdCBidXR0b24gPSBqUXVlcnkoJzxidXR0b24gY2xhc3M9XCInICsgKGFjdGl2ZSA/ICdzZWxlY3RlZCcgOiAnJykgKyAgJ1wiPicgKyBsYWJlbCArICc8L2J1dHRvbj4nKTtcbiAgICAgICAgYnV0dG9uLm9uKCdjbGljaycsIChldmVudDogSlF1ZXJ5LkNsaWNrRXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRhYnMuY2hpbGRyZW4oKS5lYWNoKChpbmRleDogbnVtYmVyLCBlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGpRdWVyeShlbGVtZW50KS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgalF1ZXJ5KGV2ZW50LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgICAgICB0aGlzLnRhYlNob3dPbmx5KCd3ZWF0aGVyLWxvYWRpbmcnKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRhYiA9IG5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubG9hZFdlYXRoZXIobmFtZSwgdGhpcy5jdXJyZW50TG9jYXRpb24pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0YWJzLmFwcGVuZChidXR0b24pO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwidGFiLScgKyBuYW1lICsgJ1wiPjwvZGl2PicpO1xuICAgIH1cblxuICAgIGxvYWRXZWF0aGVyKHRhYk5hbWU6IHN0cmluZywgbG9jYXRpb246IExvY2F0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGwubG9hZCh0aGlzLmNvbmZpZy51cmxbdGFiTmFtZV0sIHRhYk5hbWUsIGxvY2F0aW9uLCB0aGlzLmdldExhbmcoKSwgKGQ6IFdlYXRoZXJEYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSB0YWJOYW1lICsgJy0nICsgZC5zdGF0aW9uLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIHRoaXMudGFiU2hvd09ubHkoJ3RhYi0nICsgdGFiTmFtZSk7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlEYXRhKHRhYk5hbWUsIGpRdWVyeSgnZGl2LnRhYi0nICsgdGFiTmFtZSksIGQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBkaXNwbGF5RGF0YSBpcyB0aCBtYWluIGZvbmN0aW9uIGZvciBkaXNwbGF5aW5nIGRhdGEgZnJvbSB0aGUgQVBJXG4gICAgZGlzcGxheURhdGEodGFiTmFtZTogc3RyaW5nLCBjb250YWluZXI6IEpRdWVyeSwgZGF0YTogV2VhdGhlckRhdGEpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICBjb25zdCBsYW5nID0gdGhpcy5nZXRMYW5nKCk7XG5cbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gSGFuZGxlIGVycm9yXG4gICAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZXM6IHtbbGFuZzogc3RyaW5nXTogc3RyaW5nfSA9IHtcbiAgICAgICAgICAgICAgICBmcjogJ0VycmV1cicsXG4gICAgICAgICAgICAgICAgZW46ICdFcnJvcicsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZm9ybS1lbGVtZW50XCI+PGxhYmVsPicrdGl0bGVzW2xhbmddKyc6PC9sYWJlbD48c3BhbiBjbGFzcz1cInZhbHVlXCI+JyArIGRhdGEuZXJyb3IgKyAnPC9zcGFuPjwvZGl2PicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtyZWplY3QodGl0bGVzW2xhbmddKTt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIFxuICAgICAgICB2YXIgcmV0OiBQcm9taXNlPFdlYXRoZXJEYXRhPjtcbiAgICAgICAgc3dpdGNoICh0YWJOYW1lKSB7XG4gICAgICAgIGNhc2UgJ21ldGFyJzpcbiAgICAgICAgICAgIHJldCA9IG5ldyBNZXRhcihjb250YWluZXIsIGxhbmcpLmRpc3BsYXkoZGF0YSBhcyBNZXRhckRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3RhZic6XG4gICAgICAgICAgICByZXQgPSBuZXcgVGFmKGNvbnRhaW5lciwgbGFuZykuZGlzcGxheShkYXRhIGFzIFRhZkRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7cmVqZWN0KFwibm8gZGlzcGxheWVyIGZvciBcIiArIHRhYk5hbWUpO30pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJldC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kVGltZShjb250YWluZXIsIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgICAvLyBhcHBlbmRUaW1lIGRpc3BsYXlzIHRoZSB0aW1lIGFzIGEgY2FsZW5kYXJcbiAgICBhcHBlbmRUaW1lKGNvbnRhaW5lcjogSlF1ZXJ5LCBkYXRhOiBNZXRhRGF0YSkge1xuICAgICAgICBjb25zdCBsYW5nID0gdGhpcy5nZXRMYW5nKCk7XG5cbiAgICAgICAgaWYgKGRhdGEudGltZSkge1xuICAgICAgICB2YXIgbW9udGhzOiB7W2xhbmc6IHN0cmluZ106IHN0cmluZ1tdfSA9IHtcbiAgICAgICAgICAgIGZyOiBbJ0phbicsICdGZXYnLCAnTWFyJywgJ0F2cicsICdNYWknLCAnSnVuJywgJ0p1bCcsICdBb3UnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ10sXG4gICAgICAgICAgICBlbjogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLFxuICAgICAgICB9O1xuICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZShkYXRhLnRpbWUuZHQpO1xuICAgICAgICB2YXIgbW9udGggPSBtb250aHNbbGFuZ11bY3VycmVudERhdGUuZ2V0TW9udGgoKS0xXTtcbiAgICAgICAgdmFyIGhvdXIgPSAgY3VycmVudERhdGUuZ2V0SG91cnMoKS5sZWFkaW5nKDIpO1xuICAgICAgICB2YXIgbWludXRlID0gY3VycmVudERhdGUuZ2V0TWludXRlcygpLmxlYWRpbmcoMik7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiZGF0ZVwiPjxzcGFuIGNsYXNzPVwibW9udGhcIj4nICsgbW9udGggKyAnPC9zcGFuPjxzcGFuIGNsYXNzPVwiZGF5XCI+JysgY3VycmVudERhdGUuZ2V0RGF0ZSgpICsnPC9zcGFuPjwvc3Bhbj4nKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJ0aW1lXCI+JysgaG91ciArJzonKyBtaW51dGUgKyc8L3NwYW4+Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgaW5pdChtYWluQ29udGFpbmVyOiBKUXVlcnkpIHtcbiAgICAgICAgaWYgKG1haW5Db250YWluZXIubGVuZ3RoID09IDAgfHwgIXRoaXMuY29uZmlnIHx8ICF0aGlzLmNvbmZpZy5sb2NhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5sb2NhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlt3ZWF0aGVyXVwiLCBcIm1pc3NpbmcgbG9jYXRpb25zXCIpXG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYXIgYWxsXG4gICAgICAgIG1haW5Db250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgdmFyIGxhbmcgPSB0aGlzLmdldExhbmcoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0aXRsZVxuICAgICAgICBtYWluQ29udGFpbmVyLmFwcGVuZCgnPGgzIGNsYXNzPVwid2VhdGhlci10aXRsZVwiPjwvaDMnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBzdGF0aW9uIHNlbGVjdG9yXG4gICAgICAgIHZhciBzZWxlY3Rpb24gPSBqUXVlcnkoJzxzZWxlY3QgY2xhc3M9XCJ3ZWF0aGVyLWxvY2F0aW9uLXNlbGVjdFwiPjwvc2VsZWN0PicpO1xuICAgICAgICBtYWluQ29udGFpbmVyLmFwcGVuZChzZWxlY3Rpb24pO1xuICAgICAgICB0aGlzLmNvbmZpZy5sb2NhdGlvbnMuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gaW5kZXggID8gJycgOiAnc2VsZWN0ZWQnO1xuICAgICAgICBzZWxlY3Rpb24uYXBwZW5kKCc8b3B0aW9uIHZhbHVlPVwiJyArIGVsZW1lbnQubmFtZSArICdcIiAnICsgc2VsZWN0ZWQgKyAnPicgKyBlbGVtZW50Lm5hbWUgKycgKCcgKyBlbGVtZW50LmxhYmVsICsgJyk8L29wdGlvbj4nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdGlvbi5vbignY2hhbmdlJywgKGV2ZW50OiBKUXVlcnkuQ2hhbmdlRXZlbnQpID0+IHtcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGpRdWVyeShldmVudC50YXJnZXQpLmNoaWxkcmVuKFwib3B0aW9uOnNlbGVjdGVkXCIpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGxvY3MgPSB0aGlzLmNvbmZpZy5sb2NhdGlvbnMuZmlsdGVyKChlbHQ6IExvY2F0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsdC5uYW1lID09IGAke2xvY2F0aW9ufWA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChsb2NzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBsb2NzWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMudGFiU2hvd09ubHkoXCJ3ZWF0aGVyLWxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkV2VhdGhlcih0aGlzLmN1cnJlbnRUYWIgPyB0aGlzLmN1cnJlbnRUYWIgOiAnbWV0YXInLCBsb2NzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIFRhYlxuICAgICAgICB2YXIgdGFicyA9IGpRdWVyeSgnPGRpdiBjbGFzcz1cInRhYnNcIj48L2Rpdj4nKTtcbiAgICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmQodGFicyk7XG4gICAgXG4gICAgXG4gICAgICAgIC8vIEFkZCBkYXRhIGNvbnRhaW5lclxuICAgICAgICB2YXIgY29udGFpbmVyID0galF1ZXJ5KCc8ZGl2IGNsYXNzPVwid2VhdGhlci13aWRnZXQtcGxhY2Vob2xkZXJcIj48L2Rpdj4nKTtcbiAgICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmQoY29udGFpbmVyKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgnPGltZyBjbGFzcz1cIndlYXRoZXItbG9hZGluZ1wiIHNyYz1cIicgKyB0aGlzLmNvbmZpZy5sb2FkaW5nSW1nICsgJ1wiPicpO1xuICAgICAgICB0aGlzLmFkZFRhYignbWV0YXInLCAnTWV0YXInLCB0YWJzLCBjb250YWluZXIsIHRydWUpO1xuICAgICAgICB0aGlzLmFkZFRhYigndGFmJywgJ1RhZicsIHRhYnMsIGNvbnRhaW5lcik7XG4gICAgXG4gICAgICAgIC8vIERpY2xhaW1lclxuICAgICAgICB2YXIgZGlzY2xhaW1lcjoge1tsYW5nOiBzdHJpbmddOiBzdHJpbmd9ID0ge1xuICAgICAgICBmcjogJ1RvdXRlcyBsZXMgZG9ubsOpZXMgcHLDqXNlbnTDqWVzIHN1ciBjZSBzaXRlIHNvbnQgbm9uIGNlcnRpZmnDqWVzIDogZWxsZXMgZG9pdmVudCDDqnRyZSBzeXN0w6ltYXRpcXVlbWVudCBjb250cm9sw6llcyDDoCBwYXJ0aXIgZGUgZG9ubsOpZXMgb2ZmaWNpZWxsZXMnLFxuICAgICAgICBlbjogJ0FsbCB0aGUgZGF0YSBwcmVzZW50ZWQgb24gdGhpcyBzaXRlIGFyZSBub3QgY2VydGlmaWVkOiB0aGV5IG11c3QgYmUgc3lzdGVtYXRpY2FsbHkgY2hlY2tlZCBmcm9tIG9mZmljaWFsIGRhdGEnLFxuICAgICAgICB9O1xuICAgICAgICBtYWluQ29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImRpc2NsYWltZXJcIj48c3BhbiBjbGFzcz1cImRhc2hpY29ucyBkYXNoaWNvbnMtd2FybmluZ1wiPjwvc3Bhbj4nICsgZGlzY2xhaW1lcltsYW5nXSArICc8L2Rpdj4nKTtcbiAgICBcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5sb2NhdGlvbnMgfHwgdGhpcy5jb25maWcubG9jYXRpb25zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICB0aGlzLmxvYWRXZWF0aGVyKCdtZXRhcicsIHRoaXMuY29uZmlnLmxvY2F0aW9uc1swXSk7XG4gICAgfVxufSIsImltcG9ydCB7V2VhdGhlckRhdGEsIE1ldGFEYXRhLCBMb2NhdGlvbn0gZnJvbSAnLi93ZWF0aGVyJztcblxuZXhwb3J0IGNsYXNzIERvd25sb2FkTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBjYWNoZToge1tpZDogc3RyaW5nXTogQ2FjaGV9ID0ge31cbiAgICBwcml2YXRlIHRpbWVvdXRIYW5kbGVyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBvbGljeToge1t0YWJOYW1lOiBzdHJpbmddOiBEb3dubG9hZFBvbGljeX0sXG4gICAgICAgIHByaXZhdGUgZGVidWcgPSBmYWxzZSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgbG9hZChyb3V0ZTogc3RyaW5nLCB0YWJOYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBMb2NhdGlvbiwgbGFuZzogc3RyaW5nLCBkaXNwbGF5OiAoZDogV2VhdGhlckRhdGEpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWxvYWRBdChudWxsLCByb3V0ZSwgdGFiTmFtZSwgbG9jYXRpb24sIGxhbmcsIGRpc3BsYXkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbG9hZERhdGEocm91dGU6IHN0cmluZywgdGFiTmFtZTogc3RyaW5nLCBsb2NhdGlvbjogTG9jYXRpb24sIGxhbmc6IHN0cmluZywgZGlzcGxheTogKGQ6IFdlYXRoZXJEYXRhKSA9PiB2b2lkKTogIFByb21pc2U8Q2FjaGU+IHtcbiAgICAgICAgY29uc3QgY2FjaGVOYW1lID0gdGhpcy5jYWNoZU5hbWUodGFiTmFtZSwgbG9jYXRpb24pO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmNhY2hlW2NhY2hlTmFtZV07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnICYmIGNhY2hlICYmIGNhY2hlLmhhc0V4cGlyZWQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQ0FDSEVdIGV4cGlyZWQgYXQnLCBjYWNoZS5leHBpcmVBdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjYWNoZSAmJiAhY2FjaGUuaGFzRXhwaXJlZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tDQUNIRV0nLCBjYWNoZU5hbWUsIGNhY2hlLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShjYWNoZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGpRdWVyeS5nZXRKU09OKFxuICAgICAgICAgICAgICAgIFtyb3V0ZSwgbG9jYXRpb24ubmFtZV0uam9pbignLycpLFxuICAgICAgICAgICAgICAgICgpID0+IHt9LFxuICAgICAgICAgICAgKS5kb25lKFxuICAgICAgICAgICAgICAgIChkYXRhOiBXZWF0aGVyRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tHRVRdJywgY2FjaGVOYW1lLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRFeHBpcmF0aW9uID0gdGhpcy5wb2xpY3lbdGFiTmFtZV0gPyB0aGlzLnBvbGljeVt0YWJOYW1lXS5uZXh0RXhwaXJhdGlvbihkYXRhKSA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZVtjYWNoZU5hbWVdID0gbmV3IENhY2hlKFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRFeHBpcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5jYWNoZVtjYWNoZU5hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApLmZhaWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChsYW5nID09ICdmcicgPyAnU2FwZXJsaXBvcGV0dGUgISBqZSBuXFwnYXJyaXZlIHBhcyDDoCByw6ljdXDDqXJlciBsZXMgZG9ubsOpZXMuJyA6ICdPTUcgISBJXFwnbSBub3QgYWJsZSB0byByZXRyaWV2ZSBkYXRhLicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLnRoZW4oKGNhY2hlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGRpc3BsYXkoKGNhY2hlIGFzIENhY2hlKS5kYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRXhwaXJlQXQgPSAoY2FjaGUgYXMgQ2FjaGUpLmV4cGlyZUF0O1xuXG4gICAgICAgICAgICBpZiAoKGNhY2hlRXhwaXJlQXQ/LmdldFRpbWUoKSB8fCAwKT4gbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd2lsbCByZWxvYWQnLCB0YWJOYW1lLCBsb2NhdGlvbi5uYW1lLCAnYXQnLCBgJHtjYWNoZUV4cGlyZUF0Py5nZXRIb3VycygpfToke2NhY2hlRXhwaXJlQXQ/LmdldE1pbnV0ZXMoKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWxvYWRBdChjYWNoZUV4cGlyZUF0LCByb3V0ZSwgdGFiTmFtZSwgbG9jYXRpb24sIGxhbmcsIGRpc3BsYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnIpO1xuICAgICAgICAgICAgZGlzcGxheSh7ZXJyb3I6IGVyciwgc3RhdGlvbjogbG9jYXRpb24ubmFtZX0gYXMgV2VhdGhlckRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVsb2FkQXQod2hlbjogRGF0ZSB8IG51bGwsIHJvdXRlOiBzdHJpbmcsIHRhYk5hbWU6IHN0cmluZywgbG9jYXRpb246IExvY2F0aW9uLCBsYW5nOiBzdHJpbmcsIGRpc3BsYXk6IChkOiBXZWF0aGVyRGF0YSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50aW1lb3V0SGFuZGxlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLnRpbWVvdXRIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2hlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWREYXRhKHJvdXRlLCB0YWJOYW1lLCBsb2NhdGlvbiwgbGFuZywgZGlzcGxheSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZWxheSA9IHdoZW4uZ2V0VGltZSgpIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGlmIChkZWxheSA8PSAxMDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEF0KG51bGwsIHJvdXRlLCB0YWJOYW1lLCBsb2NhdGlvbiwgbGFuZywgZGlzcGxheSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRpbWVvdXRIYW5kbGVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvYWREYXRhKHJvdXRlLCB0YWJOYW1lLCBsb2NhdGlvbiwgbGFuZywgZGlzcGxheSk7XG4gICAgICAgIH0sIGRlbGF5KSBhcyBhbnk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWNoZU5hbWUodGFiTmFtZTogc3RyaW5nLCBsb2NhdGlvbjogTG9jYXRpb24pOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7dGFiTmFtZX0tJHtsb2NhdGlvbi5uYW1lfWA7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRG93bmxvYWRQb2xpY3kge1xuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgcHJpdmF0ZSBmcmVxdWVuY3lTZWNvbmQ6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSByZXRyeVNlY29uZDogbnVtYmVyLFxuICAgICkge31cblxuICAgIHB1YmxpYyBuZXh0RXhwaXJhdGlvbihkYXRhOiBNZXRhRGF0YSk6IERhdGUgfCBudWxsIHtcbiAgICAgICAgaWYgKHRoaXMuZnJlcXVlbmN5U2Vjb25kPD0wKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFUcyA9IG5ldyBEYXRlKGRhdGEudGltZS5kdCkuZ2V0VGltZSgpO1xuICAgICAgICBjb25zdCBub3dUcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgIGNvbnN0IGRhdGFUc1Nob3VsZEJlID0gTWF0aC5mbG9vcihub3dUcyAvICh0aGlzLmZyZXF1ZW5jeVNlY29uZCAqIDEwMDApKSAqIHRoaXMuZnJlcXVlbmN5U2Vjb25kICogMTAwMDtcbiAgICAgICAgY29uc3QgdGlja0FmdGVyRGF0YVRzID0gTWF0aC5jZWlsKG5vd1RzIC8gKHRoaXMuZnJlcXVlbmN5U2Vjb25kICogMTAwMCkpICogdGhpcy5mcmVxdWVuY3lTZWNvbmQgKiAxMDAwO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGFUc1Nob3VsZEJlID09IGRhdGFUcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRpY2tBZnRlckRhdGFUcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5yZXRyeVNlY29uZCoxMDAwICsgbm93VHMpO1xuICAgIH1cbn1cblxuXG5jbGFzcyBDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBkYXRhOiBXZWF0aGVyRGF0YSxcbiAgICAgICAgcHVibGljIGV4cGlyZUF0OiBEYXRlIHwgbnVsbCxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgaGFzRXhwaXJlZCgpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwaXJlQXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5leHBpcmVBdC5nZXRUaW1lKCk8IChuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwMDApO1xuICAgIH1cbn0iLCJpbXBvcnQge0NvbnRyb2xsZXJ9IGZyb20gJy4vY29udHJvbGxlcic7XG5pbXBvcnQgeyBEb3dubG9hZE1hbmFnZXIsIERvd25sb2FkUG9saWN5IH0gZnJvbSAnLi9kb3dubG9hZC1tYW5hZ2VyJztcblxualF1ZXJ5KCgpID0+IHtcbiAgICBcbiAgICBuZXcgQ29udHJvbGxlcihcbiAgICAgICAgbmV3IERvd25sb2FkTWFuYWdlcihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0YWY6IG5ldyBEb3dubG9hZFBvbGljeShcbiAgICAgICAgICAgICAgICAgICAgMyo2MCo2MCxcbiAgICAgICAgICAgICAgICAgICAgMTAqNjAsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBtZXRhcjogbmV3IERvd25sb2FkUG9saWN5KFxuICAgICAgICAgICAgICAgICAgICAzMCo2MCxcbiAgICAgICAgICAgICAgICAgICAgLy81KjYwLFxuICAgICAgICAgICAgICAgICAgICAyKjYwLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgKVxuICAgICkuaW5pdChqUXVlcnkoJ2Rpdi53ZWF0aGVyLXBsdWdpbicpKTtcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=